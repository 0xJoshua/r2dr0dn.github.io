<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="https://ybenel.cf/favicon.ico"/>

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>How To Setup Mail In Emacs | Ybenel</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="How To Setup Mail In Emacs" />
<meta property="og:locale" content="en" />
<meta name="description" content="If you’re an emacs user and love using emacs for literally everything , then you are in the right place. In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch." />
<meta property="og:description" content="If you’re an emacs user and love using emacs for literally everything , then you are in the right place. In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch." />
<meta property="og:site_name" content="Ybenel" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-07-23T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How To Setup Mail In Emacs" />
<meta name="twitter:site" content="@_ybenel" />
<script type="application/ld+json">
{"@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/logo.ico"}},"headline":"How To Setup Mail In Emacs","dateModified":"2021-07-23T00:00:00+01:00","datePublished":"2021-07-23T00:00:00+01:00","description":"If you’re an emacs user and love using emacs for literally everything , then you are in the right place. In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch.","mainEntityOfPage":{"@type":"WebPage","@id":"/emacs/2021/07/23/Emacs-Mail-Setup.html"},"url":"/emacs/2021/07/23/Emacs-Mail-Setup.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Ybenel" />


  <script async src="https://www.googletagmanager.com/gtag/js?id=G-12S7XTXXWH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-12S7XTXXWH');
</script>





<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open%20Sans|Roboto|Roboto%20Slab|Roboto%20Mono|Dancing%20Script|Noto%20Sans%20SC|Noto%20Sans%20TC|Noto%20Serif%20SC|Noto%20Serif%20TC|Ma%20Shan%20Zheng">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/skin.css">

<!-- Begin selecting skin -->

  <script>
    const hour = (new Date()).getHours();
    let filename = "";
    if (hour >= 5 && hour < 7) {
      filename = "/assets/css/skin-sunrise.css";
    } else if (hour >= 7 && hour < 17) {
      filename = "/assets/css/skin-daylight.css";
    } else if (hour >= 17 && hour < 19) {
      filename = "/assets/css/skin-sunset.css";
    } else {
      filename = "/assets/css/skin-midnight.css";
    }
    const elem = document.createElement("link");
    elem.setAttribute("rel", "stylesheet");
    elem.setAttribute("type", "text/css");
    elem.setAttribute("href", filename);
    document.getElementsByTagName("head")[0].appendChild(elem);
  </script>

<!-- End selecting skin -->

<script async src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>




  </head>

  <body>
    <div class="site-container">
      <header class="site-header">
        <div class="wrapper">
  <script>
    function clickSidebarButton() {
      const elem = document.getElementById("site-sidebar")
      if (elem.style.display == "none" || elem.style.display == "") {
        elem.style.display = "block";
      } else {
        elem.style.display = "none";
      }
    }
  </script>
  <a class="site-sidebar-button" onclick="clickSidebarButton()"><i class="far fa-user"></i>
  </a>

  <a class="site-title" rel="author" href="/">Ybenel</a>

  
    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger" title="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
          </svg>
        </span>
      </label>

      <ul class="trigger">
              <li><a class="" href="/photos/">Photos</a></li>
            
              <li><a class="" href="https://music.ybenel.cf">Music</a></li>
            
              <li><a class="" href="/about/">About</a></li>
            
              <li class="dropdown" href="#">
                <a href="javascript:void(0)" class="dropbtn">More</a>
                <div class="dropdown-content">
                    <a class="" href="/years/">Years</a>
                    <a class="" href="/categories/">Categories</a>
                    <a class="" href="/tags/">Tags</a>
                </div>
              </li>
            </ul>
    </nav>
  
</div>

      </header>

      <div class="site-body wrapper">
        <aside class="site-sidebar" id="site-sidebar">
          
            <h3 class="toc-title">Table of Contents</h3>
<nav class="toc-nav">
  <ul class="toc">
  <li><a href="#installing-mu4e">Installing Mu4e</a></li>
  <li><a href="#installing-offlineimap-and-mu-git">Installing offlineimap and mu-git</a></li>
  <li><a href="#configuring-offlineimap">Configuring OfflineImap</a>
    <ul>
      <li><a href="#setting-up-googleapi">Setting Up GoogleApi</a></li>
      <li><a href="#installing-gmail-oauth-tools">Installing gmail-oauth-tools</a></li>
      <li><a href="#adding-the-configuration-files">Adding The Configuration Files</a></li>
      <li><a href="#getting-mail">Getting Mail</a></li>
    </ul>
  </li>
  <li><a href="#getting-mu">Getting Mu</a></li>
</ul>

</nav>

          
        </aside>
        <main class="site-main" id="site-main" aria-label="Content">
          <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">

    <h1 class="post-title p-name" itemprop="name headline">How To Setup Mail In Emacs</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-07-23T00:00:00+01:00" itemprop="datePublished">
        Jul 23, 2021
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">ybenel</span></span></p>

  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>If you’re an emacs user and love using emacs for literally everything , then you are in the right place.
In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch.</p>

<h2 id="installing-mu4e">Installing Mu4e</h2>
<p>There’s a lot of ways to install mu4e in emacs , one of the easiest ways to do it if you have <strong>doom emacs</strong> installed is to edit packages.el and uncomment the mail option .
the other way is to use the <strong>package-install</strong> in emacs, to do this open selection by pressing <strong>alt+x</strong> and then type package-install and hit return this will prompt to search for packages to install , simply type mu4e and hit return and it will be installed. once it’s done quit emacs and proceed with the following steps.</p>

<h2 id="installing-offlineimap-and-mu-git">Installing offlineimap and mu-git</h2>
<p>Offlineimap is pre packaged in the official arch repositories, for mu-git there’s AUR build for it .
To Install both offlineimap and mu-git simply run the following command .</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yay <span class="nt">-S</span> offlineimap mu-git
</code></pre></div></div>

<h2 id="configuring-offlineimap">Configuring OfflineImap</h2>
<p>In order to configure offlineimap to receive our gmail mail we need to have few essential requirements .</p>
<h3 id="setting-up-googleapi">Setting Up GoogleApi</h3>
<p>GoogleAPI Is required to enable GmailApi , This will allow us to read and edit mail from our gmail account, to enable simply head over google api and search for gmailapi and click enable once its enabled search for generate token and copy it to an empty file for later.</p>
<h3 id="installing-gmail-oauth-tools">Installing gmail-oauth-tools</h3>
<p>In order for us to use the token we got earlier we need to install and use gmail-oauth-tools this will generate a refresh token that we will use later in configuring offlineimap.
To Install simply clone the repo .</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/google/gmail-oauth2-tools Public/oauth2-tools
</code></pre></div></div>
<p>And run the following command to get your refresh token</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python2 Public/oauth2-tools/python/oauth2.py <span class="nt">--generate_oauth2_token</span> <span class="nt">--client_id</span><span class="o">=</span>YOUR_CLIENT_ID <span class="nt">--client_secret</span><span class="o">=</span>YOUR_CLIENT_SECRET
</code></pre></div></div>
<p>To Get Your CLIENT-ID Head over to <a href="https://github.com/OfflineIMAP/offlineimap/blob/master/offlineimap.conf#L886-L894"></a> and read the steps .</p>

<h3 id="adding-the-configuration-files">Adding The Configuration Files</h3>
<p>To Configure OfflineIMAP Put The Following Configurations In <strong>$HOME/..offlineimaprc</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>general]
accounts <span class="o">=</span> Gmail
maxsyncaccounts <span class="o">=</span> 3
<span class="c">#pythonfile = ~/.offlineimap.py</span>

<span class="o">[</span>Account Gmail]
localrepository <span class="o">=</span> Local
remoterepository <span class="o">=</span> Remote

<span class="o">[</span>Repository Local]
<span class="nb">type</span> <span class="o">=</span> Maildir
localfolders <span class="o">=</span> ~/Maildir
nametrans <span class="o">=</span> lambda f: <span class="s1">'[Gmail]/'</span> + f <span class="k">if </span>f <span class="k">in</span> <span class="o">[</span><span class="s1">'Drafts'</span>, <span class="s1">'Starred'</span>, <span class="s1">'Important'</span>, <span class="s1">'Spam'</span>, <span class="s1">'Trash'</span>, <span class="s1">'All Mail'</span>, <span class="s1">'Sent Mail'</span><span class="o">]</span> <span class="k">else </span>f

<span class="o">[</span>Repository Remote]
<span class="nb">type</span> <span class="o">=</span> IMAP
remotehost <span class="o">=</span> imap.gmail.com
remoteuser <span class="o">=</span> USERMAIL@gmail.com
auth_mechanisms <span class="o">=</span> XOAUTH2
oauth2_client_id <span class="o">=</span> CLIENT_ID
oauth2_client_secret <span class="o">=</span> CLIENT_SECRET
oauth2_request_url <span class="o">=</span> https://accounts.google.com/o/oauth2/token
oauth2_refresh_token <span class="o">=</span> REFRESH_TOKEN
ssl <span class="o">=</span> <span class="nb">yes
</span>maxconnections <span class="o">=</span> 1
sslcacertfile <span class="o">=</span> /etc/ssl/certs/ca-certificates.crt
ssl_version <span class="o">=</span> tls1_2
folderfilter <span class="o">=</span> lambda foldername: foldername <span class="k">in</span> <span class="o">[</span><span class="s1">'INBOX'</span>, <span class="s1">'Important'</span><span class="o">]</span>
nametrans <span class="o">=</span> lambda f: f.replace<span class="o">(</span><span class="s1">'[Gmail]/'</span>, <span class="s1">''</span><span class="o">)</span> <span class="k">if </span>f.startswith<span class="o">(</span><span class="s1">'[Gmail]/'</span><span class="o">)</span> <span class="k">else </span>f
</code></pre></div></div>
<p>replace CLIENT-ID,CLIENT-SECRET,REFRESH-TOKEN with the tokens you’ve got.</p>

<h3 id="getting-mail">Getting Mail</h3>
<p>Now Once You’ve done all the previous steps , there’s one last step to do and that is to get mail to your inbox, simply run the following command to start getting ur mail.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>offlineimap
</code></pre></div></div>

<h2 id="getting-mu">Getting Mu</h2>
<p>After getting your inbox and almost ready there’s only one last thing and that is to Initiat Mu, to execute mu simply run .</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mu init <span class="o">&amp;&amp;</span> mu index
</code></pre></div></div>
<p>And you’re finally done , all you gotta do now is to open up emacs and head over to mu4e and you’ll see all your mail there, make sure to hit update from time to time to update your inbox. And That’s pretty much it Thanks for reading :)</p>

  </div>

  <footer class="post-footer">
    
      <div class="post-meta">
        <i class="fas fa-folder"></i>
        <ul class="post-taxonomies post-categories">
          
          
            <li class="post-category">
              
              <a href="/categories/#emacs">Emacs</a>
            </li>
          
        </ul>
      </div>
    

    
      <div class="post-meta">
        <i class="fas fa-tags"></i>
        <ul class="post-taxonomies post-tags">
          
          
            <li class="post-tag">
              
              <a href="/tags/#emacs">emacs</a>
            </li>
          
            <li class="post-tag">
              
              <a href="/tags/#mail">mail</a>
            </li>
          
            <li class="post-tag">
              
              <a href="/tags/#mu">mu</a>
            </li>
          
            <li class="post-tag">
              
              <a href="/tags/#mu4e">mu4e</a>
            </li>
          
            <li class="post-tag">
              
              <a href="/tags/#offlineimap">offlineimap</a>
            </li>
          
        </ul>
      </div>
    

    <nav class="post-pagination" role="navigation">
      
        <a class="post-previous" href="/rawan/2021/04/17/Girl.html">
          <i class="fas fa-arrow-left"></i> Special Lyrics

        </a>
      
    
      
    </nav>
  </footer>

  
  
</article>

          <footer class="site-footer">
            <div class="footer-col-wrapper">

  <div class="footer-col">
    <div class="copyright">
      
      
      
        <!--  -->
        
      
      
      <p>Copyright © 2021 Ybenel; All rights reserved.</p>
      
    </div>
    <!-- <p>
      Powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://github.com/ngzhio/jekyll-theme-hamilton">Hamilton</a>
    </p> -->
  </div>

  <div class="footer-col">
    <p>Where Knowledge is peace of cake.</p>
  </div>
</div>

          </footer>
        </main>
      </div>
    </div>
  </body>

</html>
