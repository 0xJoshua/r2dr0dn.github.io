<!DOCTYPE html>


<html lang="en-us" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>How To Setup Mail In Emacs - ybenel</title>

<meta name="description" content="If you&rsquo;re an emacs user and love using emacs for literally everything , then you are in the right place.
In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch.">





<link rel="icon" type="image/x-icon" href="https://ybenel.cf/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://ybenel.cf/favicon.png">


<style>
  body {
    visibility: hidden;
    opacity: 0;
  }
</style>

<noscript>
  <style>
    body {
      visibility: visible;
      opacity: 1;
    }
  </style>
</noscript>



    





    
    
        
    
    

    
        <link rel="stylesheet" href="https://ybenel.cf/css/style.min.498349ff6e7919343de1acfbcd45cfd0c7f847781d60c671960a5c0adec35e48.css" integrity="sha256-SYNJ/255GTQ94az7zUXP0Mf4R3gdYMZxlgpcCt7DXkg=">
    





    

    





    
    
        
    
    

    
        <script src="https://ybenel.cf/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js" type="text/javascript" charset="utf-8" integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script>
    







<meta property="og:title" content="How To Setup Mail In Emacs" />
<meta property="og:description" content="If you&rsquo;re an emacs user and love using emacs for literally everything , then you are in the right place.
In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ybenel.cf/post/emacs-mail-setup/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-07-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-07-23T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How To Setup Mail In Emacs"/>
<meta name="twitter:description" content="If you&rsquo;re an emacs user and love using emacs for literally everything , then you are in the right place.
In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch."/>








    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-12S7XTXXWH"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-12S7XTXXWH', { 'anonymize_ip': false });
}
</script>







    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header"> 
            
                <div class="header-top">
    <h1 class="site-title">
    <a href="/">ybenel</a>
</h1>
    <ul class="social-icons">


    
        <li>
            <a href="https://github.com/m1ndo" title="Github" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

</span>

            </a>
        </li>
    

    
        <li>
            <a href="https://twitter.com/_ybenel" title="Twitter" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>

</span>

            </a>
        </li>
    



    <li>
            <a href="https://ybenel.cf/index.xml" title="RSS" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg>

</span>

            </a>
        </li>
    

</ul>
</div>

    <nav>
        
        
        <a class="" href="https://ybenel.cf/about/" title="">About</a>
        
        <a class="" href="https://ybenel.cf/categories/" title="">categories</a>
        
        <a class="" href="https://ybenel.cf/tags/" title="">Tags</a>
        
        <a class="" href="https://ybenel.cf/posts/" title="">Archive</a>
        
    </nav>






            
        </header>
        <main id="main" tabindex="-1"> 
            
    

    <article class="post h-entry">
        <div class="post-header">
            <header>
                <h1 class="p-name post-title">How To Setup Mail In Emacs</h1>

                
            </header>
        </div>
        <div class="content e-content">
            <p>If you&rsquo;re an emacs user and love using emacs for literally everything , then you are in the right place.
In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch.</p>
<h2 id="installing-mu4e" >Installing Mu4e
<span>
    <a href="#installing-mu4e">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>There&rsquo;s a lot of ways to install mu4e in emacs , one of the easiest ways to do it if you have <strong>doom emacs</strong> installed is to edit init.el and uncomment the mail option <em>mu4e</em>.
the other way is to install it manually which we will cover it later on in mu installation.</p>
<h2 id="installing-and-mu-git-and-mu4e" >Installing and mu-git and mu4e
<span>
    <a href="#installing-and-mu-git-and-mu4e">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>In order to index our mail we&rsquo;ll be using <em>mu</em> which includes <em>mu4e</em> for emacs.
There&rsquo;s few different ways to install <em>mu</em> which changes from distribution to another.
The current stable release is <strong>1.6.6</strong>, in case u installed 1.7.0 there&rsquo;s a high chance you&rsquo;ll be facing few problems and experiencing some bugs , so be sure which version you&rsquo;re installing .
In <strong>Arch</strong> Using <em>AUR</em> is pretty straight forward.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>yay -S offlineimap mu-git
</span></span></code></pre></div><p>In <strong>Debian</strong> the stable release is 1.4.15 which is really fine really, you can use the instable repositories to install 1.6.*</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>apt install mu4e
</span></span></code></pre></div><p>In Case your distribution doesn&rsquo;t have <em>mu</em> on their repositories you can install it from source which is really easy.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone -b <span style="color:#e6db74">&#34;release/1.6&#34;</span> https://github.com/djcb/mu/
</span></span><span style="display:flex;"><span>cd mu
</span></span><span style="display:flex;"><span>meson --prefix<span style="color:#f92672">=</span>/usr --buildtype<span style="color:#f92672">=</span>plain build
</span></span><span style="display:flex;"><span>ninja -C build install
</span></span></code></pre></div><h2 id="installing-isync-or-offlineimap" >Installing Isync Or OfflineImap
<span>
    <a href="#installing-isync-or-offlineimap">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>Both <em>Isync</em> And <em>Offlineimap</em> are great programs to download our mail into our inbox.
There isn&rsquo;t really that much difference, it just depends on which one you&rsquo;d like to install.
To Install <em>Isync</em> Or <em>Offlineimap</em> On <strong>Arch</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pacman -S isync
</span></span><span style="display:flex;"><span>pacman -S offlineimap
</span></span></code></pre></div><p>To Install <em>Isync</em> or <em>Offlineimap</em> On <strong>Debian</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>apt install isync
</span></span><span style="display:flex;"><span>apt install offlineimap
</span></span></code></pre></div><h2 id="configuring-isync" >Configuring Isync
<span>
    <a href="#configuring-isync">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>Configuring <em>Isync</em> is really easy however it depends on which options you&rsquo;d like to set.
By default if you gonna use <em>Gmail</em> like myself. you&rsquo;d wanna set some google options first .
If you have 2FA enabled, you should first set up an app password this will let&rsquo;s you control your <em>Gmail only</em> will a custom generated password. First head up to <a href="https://myaccount.google.com/apppasswords">Set Up App Password</a>, Select app as <strong>Mail</strong> and device as <strong>Custom</strong> and give it a name, it will generate a custom password.
<strong>Disclaimer</strong> Your password should no be shared with anyone except yourself and <em>Isync</em>
<strong>Extra</strong> As your password will be kept in <em>Isync</em> config file in plain text, you can avoid this and encrypt it using <strong>GPG</strong>. You can either use <strong>Pass</strong> utility if its installed on your device as a wrapper around <strong>GPG</strong> or use straight <strong>GPG</strong>.
To Crypt your password using <strong>pass</strong> command.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pass insert gmail_app 
</span></span><span style="display:flex;"><span>Enter password <span style="color:#66d9ef">for</span> test_gmail: *******
</span></span><span style="display:flex;"><span>Retype password <span style="color:#66d9ef">for</span> test_gmail: *******
</span></span></code></pre></div><p>To Crypt your password using <strong>GPG</strong> command, First generate a new key if you don&rsquo;t have one yet .</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># This will prompt you for email and a name and a password (Use a valid real mail if you gonna share ur key will others)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WARNING: DO NOT LOSE YOUR KEYS AND THE PASSWORD YOU USED TO CREATE THE KEYS OTHERWISE YOUR DATA WILL BE LOSE IF YOU LOSE THEM </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ALWAYS BACKUP YOUR .gnupg AND .password-store FOLDER TO A USB_DRIVE OR AN EXTERNAL DRIVE OR IN THE CLOUD</span>
</span></span><span style="display:flex;"><span>gpg --full-generate-key
</span></span><span style="display:flex;"><span><span style="color:#75715e"># After u create your own key, find it through the following command</span>
</span></span><span style="display:flex;"><span>gpg -K --keyid-format<span style="color:#f92672">=</span>long
</span></span><span style="display:flex;"><span><span style="color:#75715e"># You&#39;ll get something like this </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># sec   rsa2048/84263A08F86B7E99 2020-06-17 [SC] [expires: 2022-06-17]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#       447FE384AAE41F357F5876FF84263A08F86B7E99</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># uid                 [ultimate] Ybenel &lt;ybenel@ybenel.cf&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ssb   rsa2048/C8D9741AC03BE89C 2020-06-17 [E] [expires: 2022-06-17]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Now you have your long key and ur short key, you can use whatever u want , now let&#39;s encrypt your file</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;YOUR APP PASSWORD&#34;</span> &gt; gmail_app
</span></span><span style="display:flex;"><span>gpg -e -r 84263A08F86B7E99 gmail_app 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This will create a new encrypted file called gmail_app.gpg, delete the gmail_app that contains plain text passowrd preferbly using shred</span>
</span></span></code></pre></div><p>Before quickly setting up our configuration file let&rsquo;s create a mail folder, to do so .</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir -p ~/Mail/Gmail
</span></span></code></pre></div><p>Now we need to create our configuration file that is located in our HOME folder which will be called <strong>~/.mbsyncrc</strong> . And Let&rsquo;s put our configurations .</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>IMAPAccount gmail
</span></span><span style="display:flex;"><span>Host imap.gmail.com
</span></span><span style="display:flex;"><span>User USERMAIL@gmail.com
</span></span><span style="display:flex;"><span>PassCmd <span style="color:#e6db74">&#34;gpg -q --for-your-eyes-only --no-tty -d ~/.password-store/gmail_app.gpg&#34;</span>
</span></span><span style="display:flex;"><span>SSLType IMAPS
</span></span><span style="display:flex;"><span>CertificateFile /etc/ssl/certs/ca-certificates.crt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>IMAPStore gmail-remote
</span></span><span style="display:flex;"><span>Account gmail
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>MaildirStore gmail-local
</span></span><span style="display:flex;"><span>Subfolders Verbatim
</span></span><span style="display:flex;"><span>Path ~/Mail/Gmail/
</span></span><span style="display:flex;"><span>Inbox ~/Mail/Gmail/Inbox
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Channel gmail
</span></span><span style="display:flex;"><span>Far :gmail-remote:
</span></span><span style="display:flex;"><span>Near :gmail-local:
</span></span><span style="display:flex;"><span>Patterns * !<span style="color:#f92672">[</span>Gmail<span style="color:#f92672">]</span>* <span style="color:#e6db74">&#34;[Gmail]/Sent Mail&#34;</span> <span style="color:#e6db74">&#34;[Gmail]/All Mail&#34;</span>
</span></span><span style="display:flex;"><span>Create Both
</span></span><span style="display:flex;"><span>Expunge Both
</span></span><span style="display:flex;"><span>SyncState *
</span></span></code></pre></div><p>If you use a plain text password replace <strong>PassCmd</strong> With <strong>Pass</strong> And Put your password .
In <strong>Patterns</strong> This will download <em>Sent Mail</em> And <em>All Mail</em> and exclude everything else, you can add other folders as well as example , <strong>&quot;[Gmail]/Spam&quot;</strong> this will download the spam mail as well .
<strong>Other Than GMAIL</strong> if you use another email service you can replace the above config with the correct info , and replace gmail with a custom name, as a quick example .</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>IMAPAccount cock 
</span></span><span style="display:flex;"><span>Host mail.cock.li
</span></span><span style="display:flex;"><span>User suckmycock11@cock.li
</span></span><span style="display:flex;"><span>PassCmd <span style="color:#e6db74">&#34;gpg -q --for-your-eyes-only --no-tty -d ~/.password-store/cockli.gpg&#34;</span>
</span></span><span style="display:flex;"><span>SSLType IMAPS
</span></span><span style="display:flex;"><span>CertificateFile /etc/ssl/certs/ca-certificates.crt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>IMAPStore cock-remote
</span></span><span style="display:flex;"><span>Account cock
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>MaildirStore cock-local
</span></span><span style="display:flex;"><span>Subfolders Verbatim
</span></span><span style="display:flex;"><span>Path ~/Mail/cock/
</span></span><span style="display:flex;"><span>Inbox ~/Mail/cock/Inbox
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Channel gmail
</span></span><span style="display:flex;"><span>Far :gmail-remote:
</span></span><span style="display:flex;"><span>Near :gmail-local:
</span></span><span style="display:flex;"><span>Patterns * !<span style="color:#f92672">[</span>Inbox<span style="color:#f92672">]</span>* <span style="color:#e6db74">&#34;[Inbox]/Sent Mail&#34;</span> <span style="color:#e6db74">&#34;[Inbox]/All Mail&#34;</span>
</span></span><span style="display:flex;"><span>Create Both
</span></span><span style="display:flex;"><span>Expunge Both
</span></span><span style="display:flex;"><span>SyncState *
</span></span></code></pre></div><h2 id="configuring-offlineimap" >Configuring OfflineImap
<span>
    <a href="#configuring-offlineimap">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p><em>Offlineimap</em> Configurations is no different than <em>Isync</em> however it does support OAUTH2 authentication mechanism which u can use or not use if u want to and what it does is just the same as App Password But With Token. Keep in mind OAUTH2 does really need more little effort if you wanna use it. Starting Off With</p>
<h3 id="setting-up-googleapi" >Setting Up GoogleApi
<span>
    <a href="#setting-up-googleapi">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>GoogleAPI Is required to enable GmailApi , This will allow us to read and edit mail from our gmail account, to enable simply head over google api and search for gmailapi and click enable once its enabled search for generate token and copy it to an empty file for later.</p>
<h3 id="installing-gmail-oauth-tools" >Installing gmail-oauth-tools
<span>
    <a href="#installing-gmail-oauth-tools">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>In order for us to use the token we got earlier we need to install and use gmail-oauth-tools this will generate a refresh token that we will use later in configuring offlineimap.
To Install simply run .</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/google/gmail-oauth2-tools Public/oauth2-tools
</span></span></code></pre></div><p>And run the following command to get your refresh token</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python2 Public/oauth2-tools/python/oauth2.py --generate_oauth2_token --client_id<span style="color:#f92672">=</span>YOUR_CLIENT_ID --client_secret<span style="color:#f92672">=</span>YOUR_CLIENT_SECRET
</span></span></code></pre></div><p>To Get Your CLIENT-ID Head over to <a href="https://github.com/OfflineIMAP/offlineimap/blob/master/offlineimap.conf#L886-L894">Here</a> and read the steps .</p>
<h3 id="adding-the-configuration-files" >Adding The Configuration Files
<span>
    <a href="#adding-the-configuration-files">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>To Configure OfflineIMAP Put The Following Configurations In <strong>~/.offlineimaprc</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ini" data-lang="ini"><span style="display:flex;"><span><span style="color:#66d9ef">[general]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">accounts</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">Gmail</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">maxsyncaccounts</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#pythonfile = ~/.offlineimap.py</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">[Account Gmail]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">localrepository</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">Local</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">remoterepository</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">Remote</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">[Repository Local]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">Maildir</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">localfolders</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">~/Maildir</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">nametrans</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">lambda f: &#39;[Gmail]/&#39; + f if f in [&#39;Drafts&#39;, &#39;Starred&#39;, &#39;Important&#39;, &#39;Spam&#39;, &#39;Trash&#39;, &#39;All Mail&#39;, &#39;Sent Mail&#39;] else f</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">[Repository Remote]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">IMAP</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">remotehost</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">imap.gmail.com</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">remoteuser</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">USERMAIL@gmail.com</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">auth_mechanisms</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">XOAUTH2</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">oauth2_client_id</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">CLIENT_ID</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">oauth2_client_secret</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">CLIENT_SECRET</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">oauth2_request_url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">https://accounts.google.com/o/oauth2/token</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">oauth2_refresh_token</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">REFRESH_TOKEN</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ssl</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">yes</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">maxconnections</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">1</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">sslcacertfile</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/etc/ssl/certs/ca-certificates.crt</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ssl_version</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">tls1_2</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">folderfilter</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">lambda foldername: foldername in [&#39;INBOX&#39;, &#39;All Mail&#39;, &#39;Sent Mail&#39;]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">nametrans</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">lambda f: f.replace(&#39;[Gmail]/&#39;, &#39;&#39;) if f.startswith(&#39;[Gmail]/&#39;) else f</span>
</span></span></code></pre></div><p>Replace <strong>CLIENT-ID,CLIENT-SECRET,REFRESH-TOKEN</strong> with the tokens you&rsquo;ve got.
In Case Of Using <strong>GPG ENCRYPTED PASSWORD</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#! /usr/bin/env python2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In side of offlineimap.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> subprocess <span style="color:#f92672">import</span> check_output
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_pass</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> check_output(<span style="color:#e6db74">&#34;gpg -dq ~/.password-store/gmail.gpg&#34;</span>, shell<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)<span style="color:#f92672">.</span>strip(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Incomment pythonfile in [general]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Remove oauth2* settings in [Repository Remote] and add</span>
</span></span><span style="display:flex;"><span>remotepasseval <span style="color:#f92672">=</span> get_password<span style="color:#f92672">()</span>
</span></span></code></pre></div><p>In Case of Using <strong>Plain Text Password</strong> Or <strong>Plain Password File</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Remove oauth2* settings in [Repository Remote] </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add for plain text passowrd</span>
</span></span><span style="display:flex;"><span>remotepass <span style="color:#f92672">=</span> mypassword
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Or Password file</span>
</span></span><span style="display:flex;"><span>remotepassfile <span style="color:#f92672">=</span> ~/gmail_app
</span></span></code></pre></div><h2 id="getting-mail" >Getting Mail
<span>
    <a href="#getting-mail">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>Now Once You&rsquo;ve done all the previous steps , there&rsquo;s one last step to do and that is to get mail to your inbox, simply run the following command to start getting ur mail.</p>
<h3 id="offlineimap" >Offlineimap
<span>
    <a href="#offlineimap">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>offlineimap
</span></span></code></pre></div><h3 id="mu" >Mu
<span>
    <a href="#mu">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mu init -m ~/Mail --my-address<span style="color:#f92672">=</span>USERMAIL@gmail.com 
</span></span><span style="display:flex;"><span>mu index
</span></span></code></pre></div><p>And you&rsquo;re finally done, you&rsquo;ll now down all ur mail and it will be indexed automatically .</p>
<h2 id="setting-up-mu4e-in-emacs" >Setting Up mu4e in emacs
<span>
    <a href="#setting-up-mu4e-in-emacs">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>There isn&rsquo;t much to do with  <strong>mu4e</strong> in <strong>emacs</strong> besides adding our configurations.
My configurations is the following .</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span>(add-to-list <span style="color:#e6db74">&#39;load-path</span> <span style="color:#e6db74">&#34;/usr/share/emacs/site-lisp/mu4e&#34;</span>)
</span></span><span style="display:flex;"><span>(with-eval-after-load <span style="color:#e6db74">&#39;mu4e</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-context-policy <span style="color:#e6db74">&#39;ask-if-none</span>
</span></span><span style="display:flex;"><span>        mu4e-compose-context-policy <span style="color:#e6db74">&#39;pick-first</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-change-filenames-when-moving <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; refresh mail using isync every 10 minutes</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-update-interval (<span style="color:#a6e22e">*</span> <span style="color:#ae81ff">10</span> <span style="color:#ae81ff">60</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Comment out mu4e-mu-binary if u have mu installed in /usr/bin/ or something</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-mu-binary <span style="color:#e6db74">&#34;~/Downloads/mu-1.6.6/mu/mu&#34;</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-get-mail-command <span style="color:#e6db74">&#34;mbsync -a&#34;</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-root-maildir <span style="color:#e6db74">&#34;~/Mail&#34;</span>)
</span></span><span style="display:flex;"><span>  (bind-key <span style="color:#e6db74">&#34;C-c C-m&#34;</span> <span style="color:#e6db74">&#39;mu4e</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-html2text-command <span style="color:#e6db74">&#34;w3m -dump -T text/html -o display_link_number=true&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; (setq mu4e-html2text-command &#34;html2markdown | grep -v &#39;&amp;nbsp_place_holder;&#39;&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  (set-email-account! <span style="color:#e6db74">&#34;Personal&#34;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#f92672">&#39;</span>((mu4e-sent-folder          <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/Gmail/[Gmail]/Sent Mail&#34;</span>)
</span></span><span style="display:flex;"><span>                        (mu4e-drafts-folder        <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/Gmail/[Gmail]/Drafts&#34;</span>)
</span></span><span style="display:flex;"><span>                        (mu4e-refile-folder        <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/Gmail/[Gmail]/All Mail&#34;</span>)
</span></span><span style="display:flex;"><span>                        (mu4e-trash-folder         <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/Gmail/[Gmail]/Trash&#34;</span>)
</span></span><span style="display:flex;"><span>                        (user-mail-address         <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;USERMAIL@gmail.com&#34;</span>)
</span></span><span style="display:flex;"><span>                        (user-full-name            <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Dr Drunkenstein&#34;</span>)
</span></span><span style="display:flex;"><span>                        (mu4e-compose-signature    <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Signed By Mando&#34;</span>)
</span></span><span style="display:flex;"><span>                        (smtpmail-smtp-user        <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;USERMAIL@gmail.com&#34;</span>)
</span></span><span style="display:flex;"><span>                        (smtpmail-smtp-server      <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;smtp.gmail.com&#34;</span>)
</span></span><span style="display:flex;"><span>                        (smtpmail-stream-type      <span style="color:#f92672">.</span> ssl)
</span></span><span style="display:flex;"><span>                        (smtpmail-smtp-service     <span style="color:#f92672">.</span> <span style="color:#ae81ff">465</span>))
</span></span><span style="display:flex;"><span>                      <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-maildir-shortcuts
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;/Gmail/inbox&#34;</span>             <span style="color:#f92672">.</span> ?i)
</span></span><span style="display:flex;"><span>          (<span style="color:#e6db74">&#34;/Gmail/[Gmail]/Sent Mail&#34;</span> <span style="color:#f92672">.</span> ?s)
</span></span><span style="display:flex;"><span>          (<span style="color:#e6db74">&#34;/Gmail/[Gmail]/Trash&#34;</span>     <span style="color:#f92672">.</span> ?t)
</span></span><span style="display:flex;"><span>          (<span style="color:#e6db74">&#34;/Gmail/[Gmail]/Drafts&#34;</span>    <span style="color:#f92672">.</span> ?d)
</span></span><span style="display:flex;"><span>          (<span style="color:#e6db74">&#34;/Gmail/[Gmail]/All Mail&#34;</span>  <span style="color:#f92672">.</span> ?a))))
</span></span></code></pre></div><h3 id="extra-configurations" >Extra Configurations
<span>
    <a href="#extra-configurations">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>if you want mail notifications and modeline alert of how many mails u have unread , you&rsquo;ll need an extra package called <strong>mu4e-alert</strong>.
You can install it through <a href="https://melpa.org/#/mu4e-alert">Melpa</a>  using <strong>package-install</strong> or through <strong>use-package</strong>
My Configurations for it is .</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span>(use-package! mu4e-alert
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">:after</span> mu4e
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">:config</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> doom-modeline-mu4e <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  (mu4e-alert-enable-mode-line-display)
</span></span><span style="display:flex;"><span>  (mu4e-alert-enable-notifications)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  (mu4e-alert-set-default-style <span style="color:#e6db74">&#39;libnotify</span>)
</span></span><span style="display:flex;"><span>  (map! <span style="color:#e6db74">:leader</span>
</span></span><span style="display:flex;"><span>        (<span style="color:#e6db74">:prefix</span> (<span style="color:#e6db74">&#34;d&#34;</span><span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;mu4e&#34;</span>)
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">:desc</span> <span style="color:#e6db74">&#34;Disable Mu4e Modeline Alert&#34;</span> <span style="color:#e6db74">&#34;d&#34;</span> <span style="color:#a6e22e">#&#39;</span>mu4e-alert-disable-mode-line-display
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">:desc</span> <span style="color:#e6db74">&#34;Enable Mu4e Modeline Alert&#34;</span> <span style="color:#e6db74">&#34;i&#34;</span> <span style="color:#a6e22e">#&#39;</span>mu4e-alert-enable-mode-line-display))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  (defvar +mu4e-alert-bell-cmd <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;paplay&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/usr/share/sounds/freedesktop/stereo/message.oga&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Cons list with command to play a sound, and the sound file to play.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                 Disabled when set to nil.&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-alert-email-notification-types <span style="color:#f92672">&#39;</span>(subjects))
</span></span><span style="display:flex;"><span>  (defun +mu4e-alert-grouped-mail-notification-formatter-with-bell (mail-group _all-mails)
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Default function to format MAIL-GROUP for notification.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                 ALL-MAILS are the all the unread emails&#34;</span>
</span></span><span style="display:flex;"><span>    (when +mu4e-alert-bell-cmd
</span></span><span style="display:flex;"><span>      (start-process (<span style="color:#a6e22e">car</span> +mu4e-alert-bell-cmd) (<span style="color:#a6e22e">cdr</span> +mu4e-alert-bell-cmd)))
</span></span><span style="display:flex;"><span>    (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&gt;</span> (<span style="color:#a6e22e">length</span> mail-group) <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        (<span style="color:#66d9ef">let*</span> ((mail-count (<span style="color:#a6e22e">length</span> mail-group))
</span></span><span style="display:flex;"><span>               (first-mail (<span style="color:#a6e22e">car</span> mail-group))
</span></span><span style="display:flex;"><span>               (title-prefix (<span style="color:#a6e22e">format</span> <span style="color:#e6db74">&#34;You have %d unread emails&#34;</span>
</span></span><span style="display:flex;"><span>                                     mail-count))
</span></span><span style="display:flex;"><span>               (field-value (mu4e-alert--get-group first-mail))
</span></span><span style="display:flex;"><span>               (title-suffix (<span style="color:#a6e22e">format</span> (pcase mu4e-alert-group-by
</span></span><span style="display:flex;"><span>                                       (<span style="color:#f92672">`</span><span style="color:#e6db74">:from</span> <span style="color:#e6db74">&#34;from %s:&#34;</span>)
</span></span><span style="display:flex;"><span>                                       (<span style="color:#f92672">`</span><span style="color:#e6db74">:to</span> <span style="color:#e6db74">&#34;to %s:&#34;</span>)
</span></span><span style="display:flex;"><span>                                       (<span style="color:#f92672">`</span><span style="color:#e6db74">:maildir</span> <span style="color:#e6db74">&#34;in %s:&#34;</span>)
</span></span><span style="display:flex;"><span>                                       (<span style="color:#f92672">`</span><span style="color:#e6db74">:priority</span> <span style="color:#e6db74">&#34;with %s priority:&#34;</span>)
</span></span><span style="display:flex;"><span>                                       (<span style="color:#f92672">`</span><span style="color:#e6db74">:flags</span> <span style="color:#e6db74">&#34;with %s flags:&#34;</span>))
</span></span><span style="display:flex;"><span>                                     field-value))
</span></span><span style="display:flex;"><span>               (title (<span style="color:#a6e22e">format</span> <span style="color:#e6db74">&#34;%s %s&#34;</span> title-prefix title-suffix)))
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">list</span> <span style="color:#e6db74">:title</span> title
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">:body</span> (s-join <span style="color:#e6db74">&#34;\n&#34;</span>
</span></span><span style="display:flex;"><span>                              (<span style="color:#a6e22e">mapcar</span> (lambda (mail)
</span></span><span style="display:flex;"><span>                                        (<span style="color:#a6e22e">format</span> <span style="color:#e6db74">&#34;%s&lt;b&gt;%s&lt;/b&gt; • %s&#34;</span>
</span></span><span style="display:flex;"><span>                                                (cond
</span></span><span style="display:flex;"><span>                                                 ((plist-get mail <span style="color:#e6db74">:in-reply-to</span>) <span style="color:#e6db74">&#34;⮩ &#34;</span>)
</span></span><span style="display:flex;"><span>                                                 ((string-match-p <span style="color:#e6db74">&#34;\\`Fwd:&#34;</span>
</span></span><span style="display:flex;"><span>                                                                  (plist-get mail <span style="color:#e6db74">:subject</span>)) <span style="color:#e6db74">&#34; ⮯ &#34;</span>)
</span></span><span style="display:flex;"><span>                                                 (<span style="color:#66d9ef">t</span> <span style="color:#e6db74">&#34;  &#34;</span>))
</span></span><span style="display:flex;"><span>                                                (truncate-string-to-width (<span style="color:#a6e22e">caar</span> (plist-get mail <span style="color:#e6db74">:from</span>))
</span></span><span style="display:flex;"><span>                                                                          <span style="color:#ae81ff">20</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>                                                (truncate-string-to-width
</span></span><span style="display:flex;"><span>                                                 (replace-regexp-in-string <span style="color:#e6db74">&#34;\\`Re: \\|\\`Fwd: &#34;</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>                                                                           (plist-get mail <span style="color:#e6db74">:subject</span>))
</span></span><span style="display:flex;"><span>                                                 <span style="color:#ae81ff">40</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">t</span>)))
</span></span><span style="display:flex;"><span>                                      mail-group))))
</span></span><span style="display:flex;"><span>      (<span style="color:#66d9ef">let*</span> ((new-mail (<span style="color:#a6e22e">car</span> mail-group))
</span></span><span style="display:flex;"><span>             (subject (plist-get new-mail <span style="color:#e6db74">:subject</span>))
</span></span><span style="display:flex;"><span>             (sender (<span style="color:#a6e22e">caar</span> (plist-get new-mail <span style="color:#e6db74">:from</span>))))
</span></span><span style="display:flex;"><span>        (<span style="color:#a6e22e">list</span> <span style="color:#e6db74">:title</span> sender <span style="color:#e6db74">:body</span> subject))))
</span></span><span style="display:flex;"><span>  (<span style="color:#66d9ef">setq</span> mu4e-alert-grouped-mail-notification-formatter <span style="color:#a6e22e">#&#39;</span>+mu4e-alert-grouped-mail-notification-formatter-with-bell))
</span></span></code></pre></div><p>And That&rsquo;s it .</p>
<h3 id="screenshot" >Screenshot
<span>
    <a href="#screenshot">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p><img src="/imgs/general/mu4e_emacs.png" alt="emacs_mu4e"></p>
        </div>
        

    



<div class="post-info">
    
        <div class="post-date dt-published">
            <a class="u-url" href="/post/emacs-mail-setup/"><time datetime="2021-07-23">Fri Jul 23 2021</time></a>
            
        </div>
    

    <a class="post-hidden-url u-url" href="https://ybenel.cf/post/emacs-mail-setup/">https://ybenel.cf/post/emacs-mail-setup/</a>
    <a href="https://ybenel.cf" class="p-name p-author post-hidden-author h-card" rel="me">ybenel</a>


    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    
                    <li><a href="https://ybenel.cf/categories/emacs/">Emacs</a></li>
                
            </ul>
        
        
            <ul class="post-tags">
                
                    
                    <li><a href="https://ybenel.cf/tags/mail/">#mail</a></li>
                
                    
                    <li><a href="https://ybenel.cf/tags/offlineimap/">#offlineimap</a></li>
                
                    
                    <li><a href="https://ybenel.cf/tags/mu/">#mu</a></li>
                
                    
                    <li><a href="https://ybenel.cf/tags/mu4e/">#mu4e</a></li>
                
                    
                    <li><a href="https://ybenel.cf/tags/isync/">#isync</a></li>
                
                    
                    <li><a href="https://ybenel.cf/tags/oauth2/">#oauth2</a></li>
                
            </ul>
        
        
    </div>
</div>

    </article>

    
        
        
    

    
        
    <div class="pagination post-pagination">
        <div class="left pagination-item ">
            
                <a href="/post/thm-cmspit/">THM - CMSpit</a>
            
        </div>
        <div class="right pagination-item ">
            
                <a href="/post/htb-armageddon/">HTB - Armageddon</a>
            
        </div>
    </div>




    

    
        
    <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "ybenel" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>









    

        </main>
        
            <footer class="common-footer">
    
    

    <div class="common-footer-bottom">
        
        <div class="copyright">
            <p>© ybenel (M1ndo), 2023<br>
            Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.<br>
            
            </p>  
        </div> 

        

    



    <button class="theme-switcher">
        Dark theme
    </button>


<script>
const STORAGE_KEY = 'user-color-scheme'
const defaultTheme = "dark"

let currentTheme
let switchButton
let autoDefinedScheme = window.matchMedia('(prefers-color-scheme: dark)')

const autoChangeScheme = e => {
    currentTheme = e.matches ? 'dark' : 'light'
    document.documentElement.setAttribute('data-theme', currentTheme)
    changeButtonText()
}

document.addEventListener('DOMContentLoaded', function() {
    switchButton = document.querySelector('.theme-switcher')
    currentTheme = detectCurrentScheme()
    if (currentTheme == 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark')
    }
    if (currentTheme == 'auto') {
        autoChangeScheme(autoDefinedScheme);
        autoDefinedScheme.addListener(autoChangeScheme);
    }

    if (switchButton) {
        changeButtonText()
        switchButton.addEventListener('click', switchTheme, false)
    }
  
    showContent()
})

function detectCurrentScheme() {
    if (localStorage !== null && localStorage.getItem(STORAGE_KEY)) {
        return localStorage.getItem(STORAGE_KEY)
    } 
    if (defaultTheme) {
        return defaultTheme
    } 
    if (!window.matchMedia) {
        return 'light'
    } 
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        return 'dark'
    }
    return 'light'
}

function changeButtonText()
{   
    if (switchButton) {
        switchButton.textContent = currentTheme == 'dark' ?  "Light theme" : "Dark theme"
    }
}

function switchTheme(e) {
    if (currentTheme == 'dark') {
        if (localStorage !== null)
            localStorage.setItem(STORAGE_KEY, 'light')
        document.documentElement.setAttribute('data-theme', 'light')
        currentTheme = 'light'
    } else {
        if (localStorage !== null)
            localStorage.setItem(STORAGE_KEY, 'dark')
        document.documentElement.setAttribute('data-theme', 'dark')
        currentTheme = 'dark'
    }
    changeButtonText()
}

function showContent() {
    document.body.style.visibility = 'visible';
    document.body.style.opacity = 1;
}
</script>   
    </div>

    <p class="h-card vcard">

    <a href=https://ybenel.cf class="p-name u-url url fn" rel="me">ybenel (M1ndo)</a> 

    

     
        <img class="u-photo" src="/imgs/mcd.png" />
    
</p> 
</footer>

        
    </div>
</body>
</html>
